# Repository Snapshot

## 1) Metadata
- Repository name: blux-commander
- Organization / owner: unknown
- Default branch (if detectable): unknown
- HEAD commit hash (if available): 8e965b6429e839bfe74091cb41721308255fca12
- Snapshot timestamp (UTC): 2026-01-20T13:54:32.856331+00:00
- Total file count (excluding directories): 146
- Short description: # BLUX Commander

## 2) Repository Tree
├── .git/
│   ├── FETCH_HEAD [text]
│   ├── HEAD [text]
│   ├── config [text]
│   ├── description [text]
│   ├── hooks/
│   │   ├── applypatch-msg.sample [text]
│   │   ├── commit-msg.sample [text]
│   │   ├── fsmonitor-watchman.sample [text]
│   │   ├── post-update.sample [text]
│   │   ├── pre-applypatch.sample [text]
│   │   ├── pre-commit.sample [text]
│   │   ├── pre-merge-commit.sample [text]
│   │   ├── pre-push.sample [text]
│   │   ├── pre-rebase.sample [text]
│   │   ├── pre-receive.sample [text]
│   │   ├── prepare-commit-msg.sample [text]
│   │   ├── push-to-checkout.sample [text]
│   │   ├── sendemail-validate.sample [text]
│   │   └── update.sample [text]
│   ├── index [binary]
│   ├── info/
│   │   └── exclude [text]
│   ├── logs/
│   │   ├── HEAD [text]
│   │   └── refs/
│   │       └── heads/
│   │           └── work [text]
│   ├── objects/
│   │   ├── 00/
│   │   │   └── f1f3894d0208b5956d66d0a21808d20a69265c [binary]
│   │   ├── 0f/
│   │   │   └── 07f8f92027b7430666d53ac042c34ca6f7940e [binary]
│   │   ├── 11/
│   │   │   ├── 093babff05fe82b756da40086739ccd28fffe2 [binary]
│   │   │   └── 8623066910d226e08436061084196071197ea7 [binary]
│   │   ├── 18/
│   │   │   └── d3c22712584d510b48e230f3fea33314b2e8ba [binary]
│   │   ├── 1c/
│   │   │   └── a88be3afc0e6f521be1cab512decef2a9e3398 [binary]
│   │   ├── 27/
│   │   │   └── f67bfc822ae33ac6638913e5f26fc36d13c2df [binary]
│   │   ├── 30/
│   │   │   └── a7037f84f0e3acd9770ead68385516ec63eed3 [binary]
│   │   ├── 34/
│   │   │   └── a5f4700ef3ba5c89fe8cb131521280ce7ddce3 [binary]
│   │   ├── 3c/
│   │   │   └── 34aa33b2ded8a285cd2d2c074489c17fa53f33 [binary]
│   │   ├── 41/
│   │   │   └── 7d9aff9fac533feb31958958652d5c99abe455 [binary]
│   │   ├── 4a/
│   │   │   └── 09cca8592af5088ebd4045fa71c1ac3461406d [binary]
│   │   ├── 4b/
│   │   │   └── 1bdf8568d03c8b5970fa94d62146d89cb249c1 [binary]
│   │   ├── 4d/
│   │   │   └── fe985e9b2b61f0c2d29c48d6487777a3fa0974 [binary]
│   │   ├── 54/
│   │   │   └── 8d490c22cf5ab31cfecaeab9c7ec2725355943 [binary]
│   │   ├── 58/
│   │   │   └── 317e2614fdf0ab63a70c59563781aa46ff51d0 [binary]
│   │   ├── 60/
│   │   │   ├── eb905063a5f0dadeea166ea0d020a103a233fd [binary]
│   │   │   └── ef7814cea07c03f5bf7cfe5e9ee75d45ae7399 [binary]
│   │   ├── 62/
│   │   │   └── d79202f3566222591deb60b79429717275c21d [binary]
│   │   ├── 65/
│   │   │   └── 5cdcad2a9f28dc48684726c7ca0e8c1a0f6e91 [binary]
│   │   ├── 6a/
│   │   │   └── 1134c3a345130189e446085b927a32d87708ff [binary]
│   │   ├── 6d/
│   │   │   └── 620aa316bff6f7929dca8deb38da38225672e3 [binary]
│   │   ├── 6e/
│   │   │   ├── 0e0c2bb1fbd4c464f781e947c5e75cb23d5244 [binary]
│   │   │   ├── 5e85e0c26a9d7b0d51c136e6ca3b55f0db44a7 [binary]
│   │   │   └── cd5b474d60d771ab2cb0bc6b98f4c6bc819347 [binary]
│   │   ├── 72/
│   │   │   └── 6e3b37fd2aea01a12e5647e6542240bed9cb09 [binary]
│   │   ├── 76/
│   │   │   └── 2d2eb7e6aa1144f785cd285cb9c97f19166f43 [binary]
│   │   ├── 7b/
│   │   │   ├── d76e448e2b4945577d9bf1acb293a44d260de3 [binary]
│   │   │   └── d7bf4c502d7c05c17338e3b4a89cb78ee00515 [binary]
│   │   ├── 84/
│   │   │   └── 91c860cecbf4b84ab178a5d4b774c7cd2697e4 [binary]
│   │   ├── 8b/
│   │   │   └── 2156373efd139ecdb48704ff3e4a408aa29d04 [binary]
│   │   ├── 8e/
│   │   │   └── 965b6429e839bfe74091cb41721308255fca12 [binary]
│   │   ├── 92/
│   │   │   └── 2a9bafa643eb991634b97e7b561661d9139126 [binary]
│   │   ├── 9c/
│   │   │   └── ce8992c65b2a38a81bcc8b18d54f996e847bdd [binary]
│   │   ├── 9d/
│   │   │   └── 0018ced08a1e285f73ff7dcea47a1b9f84b294 [binary]
│   │   ├── a3/
│   │   │   └── 29b093830c669ebcbb2bb1ed1330a4ec65b978 [binary]
│   │   ├── a5/
│   │   │   └── 8516191009cd265e20d03d16356fbcf2a0abd4 [binary]
│   │   ├── ac/
│   │   │   ├── 5a1fcc20775898adbe993f0c28d42cde33e766 [binary]
│   │   │   └── b9856d494bab326d3ec48b14c1a7e3b7224d2c [binary]
│   │   ├── b5/
│   │   │   ├── 03742da0f85f5510af17103b278bc82516a900 [binary]
│   │   │   └── 8579777a5a26995da1e0376e9813163733e42b [binary]
│   │   ├── be/
│   │   │   └── b70f86b62b93f7eb130c7ad37de04706d79da9 [binary]
│   │   ├── d0/
│   │   │   ├── 2fd244143ee9c3e3f628958d70004391a5ce07 [binary]
│   │   │   ├── 8f3c0a046f07972824596280f33d642f1a4012 [binary]
│   │   │   ├── e35baa7c334bc355d43af18a6f76c2c6f7e692 [binary]
│   │   │   └── f03571e3575b3798a91c0fdd9be8e33b6c44b6 [binary]
│   │   ├── d3/
│   │   │   └── d44026a76c68271c79b119763a7ababba263af [binary]
│   │   ├── d6/
│   │   │   └── c90a533a8091180f58c7d0ca8234f1dab9c846 [binary]
│   │   ├── e1/
│   │   │   └── 04af5dbd607ca5e9f6e34c99f86214c699f622 [binary]
│   │   ├── ec/
│   │   │   └── 51961d6fb705a2b71aa2a1a5d92fbcc0dc781c [binary]
│   │   ├── ee/
│   │   │   └── 17cb5c1bfd5fb1df6a7eac3fef3019c801b690 [binary]
│   │   ├── f9/
│   │   │   ├── 4588c40c8b262e555321590c1fb5684f042483 [binary]
│   │   │   └── 5076afd1667aa5755a53e9237d406d555f082b [binary]
│   │   ├── fa/
│   │   │   ├── 3d632c2cd5e722eb31c6c8f5dc07b36eb5ecd7 [binary]
│   │   │   └── 966eac8282ffa8da204cc02007b871cc912a43 [binary]
│   │   ├── fc/
│   │   │   └── 8122e2ab2e9d2e3430a19f158bb71e2481640e [binary]
│   │   └── pack/
│   │       ├── pack-e37421529fb54870d8e275e3039a244c7b87e337.idx [binary]
│   │       ├── pack-e37421529fb54870d8e275e3039a244c7b87e337.pack [binary]
│   │       └── pack-e37421529fb54870d8e275e3039a244c7b87e337.rev [binary]
│   ├── packed-refs [text]
│   └── refs/
│       └── heads/
│           └── work [text]
├── .github/
│   └── workflows/
│       ├── ci.yml [text]
│       └── physics.yml [text]
├── .gitignore [text]
├── CHANGELOG.md [text]
├── CODE_OF_CONDUCT.md [text]
├── COMMERCIAL.md [text]
├── CONTRIBUTING.md [text]
├── LICENSE [text]
├── LICENSE-APACHE [text]
├── LICENSE-COMMERCIAL [text]
├── NOTICE [text]
├── README.md [text]
├── blux_commander/
│   ├── __init__.py [text]
│   ├── cli.py [text]
│   ├── core/
│   │   ├── api.py [text]
│   │   ├── commander.py [text]
│   │   ├── config.py [text]
│   │   ├── plugins.py [text]
│   │   ├── shell.py [text]
│   │   ├── telemetry.py [text]
│   │   └── tui.py [text]
│   ├── integrations/
│   │   ├── ca.py [text]
│   │   ├── doctrine.py [text]
│   │   └── quantum.py [text]
│   ├── ui/
│   │   ├── panels/
│   │   │   ├── ai_panel.py [text]
│   │   │   ├── logs_panel.py [text]
│   │   │   ├── plugins_panel.py [text]
│   │   │   ├── telemetry_panel.py [text]
│   │   │   └── terminal_panel.py [text]
│   │   └── themes/
│   │       ├── default.tcss [text]
│   │       └── highcontrast.tcss [text]
│   └── web/
│       ├── auth.py [text]
│       ├── commands.py [text]
│       ├── insights.py [text]
│       ├── server.py [text]
│       ├── static/
│       │   ├── app.js [text]
│       │   └── assets/
│       │       └── style.css [text]
│       ├── storage.py [text]
│       └── templates/
│           └── index.html [text]
├── docs/
│   ├── API.md [text]
│   ├── ARCHITECTURE.md [text]
│   ├── CONFIGURATION.md [text]
│   ├── INSTALL.md [text]
│   ├── INTEGRATIONS.md [text]
│   ├── OPERATIONS.md [text]
│   ├── ROADMAP.md [text]
│   ├── ROLE.md [text]
│   ├── SECURITY.md [text]
│   ├── THEMES.md [text]
│   ├── TROUBLESHOOTING.md [text]
│   └── index.md [text]
├── mkdocs.yml [text]
├── pyproject.toml [text]
├── scripts/
│   ├── build_docs.sh [text]
│   ├── gen_filetree.py [text]
│   ├── physics_tests.sh [text]
│   ├── run_tui_demo.py [text]
│   └── update_readme_filetree.py [text]
└── tests/
    ├── test_cli.py [text]
    ├── test_plugins.py [text]
    ├── test_shell.py [text]
    ├── test_tui.py [text]
    └── test_web_dashboard.py [text]

## 3) FULL FILE CONTENTS (MANDATORY)

FILE: .git/FETCH_HEAD
Kind: text
Size: 104
Last modified: 2026-01-20T13:53:31.383815+00:00

CONTENT:
8e965b6429e839bfe74091cb41721308255fca12		branch 'main' of https://github.com/Outer-Void/blux-commander

FILE: .git/HEAD
Kind: text
Size: 21
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
ref: refs/heads/work

FILE: .git/config
Kind: text
Size: 92
Last modified: 2026-01-20T13:53:31.455814+00:00

CONTENT:
[core]
	repositoryformatversion = 0
	filemode = true
	bare = false
	logallrefupdates = true

FILE: .git/description
Kind: text
Size: 73
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
Unnamed repository; edit this file 'description' to name the repository.

FILE: .git/hooks/applypatch-msg.sample
Kind: text
Size: 478
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to check the commit log message taken by
# applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.  The hook is
# allowed to edit the commit message file.
#
# To enable this hook, rename this file to "applypatch-msg".

. git-sh-setup
commitmsg="$(git rev-parse --git-path hooks/commit-msg)"
test -x "$commitmsg" && exec "$commitmsg" ${1+"$@"}
:

FILE: .git/hooks/commit-msg.sample
Kind: text
Size: 896
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to check the commit log message.
# Called by "git commit" with one argument, the name of the file
# that has the commit message.  The hook should exit with non-zero
# status after issuing an appropriate message if it wants to stop the
# commit.  The hook is allowed to edit the commit message file.
#
# To enable this hook, rename this file to "commit-msg".

# Uncomment the below to add a Signed-off-by line to the message.
# Doing this in a hook is a bad idea in general, but the prepare-commit-msg
# hook is more suited to it.
#
# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# grep -qs "^$SOB" "$1" || echo "$SOB" >> "$1"

# This example catches duplicate Signed-off-by lines.

test "" = "$(grep '^Signed-off-by: ' "$1" |
	 sort | uniq -c | sed -e '/^[ 	]*1[ 	]/d')" || {
	echo >&2 Duplicate Signed-off-by lines.
	exit 1
}

FILE: .git/hooks/fsmonitor-watchman.sample
Kind: text
Size: 4726
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
#!/usr/bin/perl

use strict;
use warnings;
use IPC::Open2;

# An example hook script to integrate Watchman
# (https://facebook.github.io/watchman/) with git to speed up detecting
# new and modified files.
#
# The hook is passed a version (currently 2) and last update token
# formatted as a string and outputs to stdout a new update token and
# all files that have been modified since the update token. Paths must
# be relative to the root of the working tree and separated by a single NUL.
#
# To enable this hook, rename this file to "query-watchman" and set
# 'git config core.fsmonitor .git/hooks/query-watchman'
#
my ($version, $last_update_token) = @ARGV;

# Uncomment for debugging
# print STDERR "$0 $version $last_update_token\n";

# Check the hook interface version
if ($version ne 2) {
	die "Unsupported query-fsmonitor hook version '$version'.\n" .
	    "Falling back to scanning...\n";
}

my $git_work_tree = get_working_dir();

my $retry = 1;

my $json_pkg;
eval {
	require JSON::XS;
	$json_pkg = "JSON::XS";
	1;
} or do {
	require JSON::PP;
	$json_pkg = "JSON::PP";
};

launch_watchman();

sub launch_watchman {
	my $o = watchman_query();
	if (is_work_tree_watched($o)) {
		output_result($o->{clock}, @{$o->{files}});
	}
}

sub output_result {
	my ($clockid, @files) = @_;

	# Uncomment for debugging watchman output
	# open (my $fh, ">", ".git/watchman-output.out");
	# binmode $fh, ":utf8";
	# print $fh "$clockid\n@files\n";
	# close $fh;

	binmode STDOUT, ":utf8";
	print $clockid;
	print "\0";
	local $, = "\0";
	print @files;
}

sub watchman_clock {
	my $response = qx/watchman clock "$git_work_tree"/;
	die "Failed to get clock id on '$git_work_tree'.\n" .
		"Falling back to scanning...\n" if $? != 0;

	return $json_pkg->new->utf8->decode($response);
}

sub watchman_query {
	my $pid = open2(\*CHLD_OUT, \*CHLD_IN, 'watchman -j --no-pretty')
	or die "open2() failed: $!\n" .
	"Falling back to scanning...\n";

	# In the query expression below we're asking for names of files that
	# changed since $last_update_token but not from the .git folder.
	#
	# To accomplish this, we're using the "since" generator to use the
	# recency index to select candidate nodes and "fields" to limit the
	# output to file names only. Then we're using the "expression" term to
	# further constrain the results.
	my $last_update_line = "";
	if (substr($last_update_token, 0, 1) eq "c") {
		$last_update_token = "\"$last_update_token\"";
		$last_update_line = qq[\n"since": $last_update_token,];
	}
	my $query = <<"	END";
		["query", "$git_work_tree", {$last_update_line
			"fields": ["name"],
			"expression": ["not", ["dirname", ".git"]]
		}]
	END

	# Uncomment for debugging the watchman query
	# open (my $fh, ">", ".git/watchman-query.json");
	# print $fh $query;
	# close $fh;

	print CHLD_IN $query;
	close CHLD_IN;
	my $response = do {local $/; <CHLD_OUT>};

	# Uncomment for debugging the watch response
	# open ($fh, ">", ".git/watchman-response.json");
	# print $fh $response;
	# close $fh;

	die "Watchman: command returned no output.\n" .
	"Falling back to scanning...\n" if $response eq "";
	die "Watchman: command returned invalid output: $response\n" .
	"Falling back to scanning...\n" unless $response =~ /^\{/;

	return $json_pkg->new->utf8->decode($response);
}

sub is_work_tree_watched {
	my ($output) = @_;
	my $error = $output->{error};
	if ($retry > 0 and $error and $error =~ m/unable to resolve root .* directory (.*) is not watched/) {
		$retry--;
		my $response = qx/watchman watch "$git_work_tree"/;
		die "Failed to make watchman watch '$git_work_tree'.\n" .
		    "Falling back to scanning...\n" if $? != 0;
		$output = $json_pkg->new->utf8->decode($response);
		$error = $output->{error};
		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		# Uncomment for debugging watchman output
		# open (my $fh, ">", ".git/watchman-output.out");
		# close $fh;

		# Watchman will always return all files on the first query so
		# return the fast "everything is dirty" flag to git and do the
		# Watchman query just to get it over with now so we won't pay
		# the cost in git to look up each individual file.
		my $o = watchman_clock();
		$error = $output->{error};

		die "Watchman: $error.\n" .
		"Falling back to scanning...\n" if $error;

		output_result($o->{clock}, ("/"));
		$last_update_token = $o->{clock};

		eval { launch_watchman() };
		return 0;
	}

	die "Watchman: $error.\n" .
	"Falling back to scanning...\n" if $error;

	return 1;
}

sub get_working_dir {
	my $working_dir;
	if ($^O =~ 'msys' || $^O =~ 'cygwin') {
		$working_dir = Win32::GetCwd();
		$working_dir =~ tr/\\/\//;
	} else {
		require Cwd;
		$working_dir = Cwd::cwd();
	}

	return $working_dir;
}

FILE: .git/hooks/post-update.sample
Kind: text
Size: 189
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to prepare a packed repository for use over
# dumb transports.
#
# To enable this hook, rename this file to "post-update".

exec git update-server-info

FILE: .git/hooks/pre-applypatch.sample
Kind: text
Size: 424
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to verify what is about to be committed
# by applypatch from an e-mail message.
#
# The hook should exit with non-zero status after issuing an
# appropriate message if it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-applypatch".

. git-sh-setup
precommit="$(git rev-parse --git-path hooks/pre-commit)"
test -x "$precommit" && exec "$precommit" ${1+"$@"}
:

FILE: .git/hooks/pre-commit.sample
Kind: text
Size: 1643
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git commit" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message if
# it wants to stop the commit.
#
# To enable this hook, rename this file to "pre-commit".

if git rev-parse --verify HEAD >/dev/null 2>&1
then
	against=HEAD
else
	# Initial commit: diff against an empty tree object
	against=$(git hash-object -t tree /dev/null)
fi

# If you want to allow non-ASCII filenames set this variable to true.
allownonascii=$(git config --type=bool hooks.allownonascii)

# Redirect output to stderr.
exec 1>&2

# Cross platform projects tend to avoid non-ASCII filenames; prevent
# them from being added to the repository. We exploit the fact that the
# printable range starts at the space character and ends with tilde.
if [ "$allownonascii" != "true" ] &&
	# Note that the use of brackets around a tr range is ok here, (it's
	# even required, for portability to Solaris 10's /usr/bin/tr), since
	# the square bracket bytes happen to fall in the designated range.
	test $(git diff --cached --name-only --diff-filter=A -z $against |
	  LC_ALL=C tr -d '[ -~]\0' | wc -c) != 0
then
	cat <<\EOF
Error: Attempt to add a non-ASCII file name.

This can cause problems if you want to work with people on other platforms.

To be portable it is advisable to rename the file.

If you know what you are doing you can disable this check using:

  git config hooks.allownonascii true
EOF
	exit 1
fi

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --

FILE: .git/hooks/pre-merge-commit.sample
Kind: text
Size: 416
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to verify what is about to be committed.
# Called by "git merge" with no arguments.  The hook should
# exit with non-zero status after issuing an appropriate message to
# stderr if it wants to stop the merge commit.
#
# To enable this hook, rename this file to "pre-merge-commit".

. git-sh-setup
test -x "$GIT_DIR/hooks/pre-commit" &&
        exec "$GIT_DIR/hooks/pre-commit"
:

FILE: .git/hooks/pre-push.sample
Kind: text
Size: 1374
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
#!/bin/sh

# An example hook script to verify what is about to be pushed.  Called by "git
# push" after it has checked the remote status, but before anything has been
# pushed.  If this script exits with a non-zero status nothing will be pushed.
#
# This hook is called with the following parameters:
#
# $1 -- Name of the remote to which the push is being done
# $2 -- URL to which the push is being done
#
# If pushing without using a named remote those arguments will be equal.
#
# Information about the commits which are being pushed is supplied as lines to
# the standard input in the form:
#
#   <local ref> <local oid> <remote ref> <remote oid>
#
# This sample shows how to prevent push of commits where the log message starts
# with "WIP" (work in progress).

remote="$1"
url="$2"

zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')

while read local_ref local_oid remote_ref remote_oid
do
	if test "$local_oid" = "$zero"
	then
		# Handle delete
		:
	else
		if test "$remote_oid" = "$zero"
		then
			# New branch, examine all commits
			range="$local_oid"
		else
			# Update to existing branch, examine new commits
			range="$remote_oid..$local_oid"
		fi

		# Check for WIP commit
		commit=$(git rev-list -n 1 --grep '^WIP' "$range")
		if test -n "$commit"
		then
			echo >&2 "Found WIP commit in $local_ref, not pushing"
			exit 1
		fi
	fi
done

exit 0

FILE: .git/hooks/pre-rebase.sample
Kind: text
Size: 4898
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# Copyright (c) 2006, 2008 Junio C Hamano
#
# The "pre-rebase" hook is run just before "git rebase" starts doing
# its job, and can prevent the command from running by exiting with
# non-zero status.
#
# The hook is called with the following parameters:
#
# $1 -- the upstream the series was forked from.
# $2 -- the branch being rebased (or empty when rebasing the current branch).
#
# This sample shows how to prevent topic branches that are already
# merged to 'next' branch from getting rebased, because allowing it
# would result in rebasing already published history.

publish=next
basebranch="$1"
if test "$#" = 2
then
	topic="refs/heads/$2"
else
	topic=`git symbolic-ref HEAD` ||
	exit 0 ;# we do not interrupt rebasing detached HEAD
fi

case "$topic" in
refs/heads/??/*)
	;;
*)
	exit 0 ;# we do not interrupt others.
	;;
esac

# Now we are dealing with a topic branch being rebased
# on top of master.  Is it OK to rebase it?

# Does the topic really exist?
git show-ref -q "$topic" || {
	echo >&2 "No such branch $topic"
	exit 1
}

# Is topic fully merged to master?
not_in_master=`git rev-list --pretty=oneline ^master "$topic"`
if test -z "$not_in_master"
then
	echo >&2 "$topic is fully merged to master; better remove it."
	exit 1 ;# we could allow it, but there is no point.
fi

# Is topic ever merged to next?  If so you should not be rebasing it.
only_next_1=`git rev-list ^master "^$topic" ${publish} | sort`
only_next_2=`git rev-list ^master           ${publish} | sort`
if test "$only_next_1" = "$only_next_2"
then
	not_in_topic=`git rev-list "^$topic" master`
	if test -z "$not_in_topic"
	then
		echo >&2 "$topic is already up to date with master"
		exit 1 ;# we could allow it, but there is no point.
	else
		exit 0
	fi
else
	not_in_next=`git rev-list --pretty=oneline ^${publish} "$topic"`
	/usr/bin/perl -e '
		my $topic = $ARGV[0];
		my $msg = "* $topic has commits already merged to public branch:\n";
		my (%not_in_next) = map {
			/^([0-9a-f]+) /;
			($1 => 1);
		} split(/\n/, $ARGV[1]);
		for my $elem (map {
				/^([0-9a-f]+) (.*)$/;
				[$1 => $2];
			} split(/\n/, $ARGV[2])) {
			if (!exists $not_in_next{$elem->[0]}) {
				if ($msg) {
					print STDERR $msg;
					undef $msg;
				}
				print STDERR " $elem->[1]\n";
			}
		}
	' "$topic" "$not_in_next" "$not_in_master"
	exit 1
fi

<<\DOC_END

This sample hook safeguards topic branches that have been
published from being rewound.

The workflow assumed here is:

 * Once a topic branch forks from "master", "master" is never
   merged into it again (either directly or indirectly).

 * Once a topic branch is fully cooked and merged into "master",
   it is deleted.  If you need to build on top of it to correct
   earlier mistakes, a new topic branch is created by forking at
   the tip of the "master".  This is not strictly necessary, but
   it makes it easier to keep your history simple.

 * Whenever you need to test or publish your changes to topic
   branches, merge them into "next" branch.

The script, being an example, hardcodes the publish branch name
to be "next", but it is trivial to make it configurable via
$GIT_DIR/config mechanism.

With this workflow, you would want to know:

(1) ... if a topic branch has ever been merged to "next".  Young
    topic branches can have stupid mistakes you would rather
    clean up before publishing, and things that have not been
    merged into other branches can be easily rebased without
    affecting other people.  But once it is published, you would
    not want to rewind it.

(2) ... if a topic branch has been fully merged to "master".
    Then you can delete it.  More importantly, you should not
    build on top of it -- other people may already want to
    change things related to the topic as patches against your
    "master", so if you need further changes, it is better to
    fork the topic (perhaps with the same name) afresh from the
    tip of "master".

Let's look at this example:

		   o---o---o---o---o---o---o---o---o---o "next"
		  /       /           /           /
		 /   a---a---b A     /           /
		/   /               /           /
	       /   /   c---c---c---c B         /
	      /   /   /             \         /
	     /   /   /   b---b C     \       /
	    /   /   /   /             \     /
    ---o---o---o---o---o---o---o---o---o---o---o "master"


A, B and C are topic branches.

 * A has one fix since it was merged up to "next".

 * B has finished.  It has been fully merged up to "master" and "next",
   and is ready to be deleted.

 * C has not merged to "next" at all.

We would want to allow C to be rebased, refuse A, and encourage
B to be deleted.

To compute (1):

	git rev-list ^master ^topic next
	git rev-list ^master        next

	if these match, topic has not merged in next at all.

To compute (2):

	git rev-list master..topic

	if this is empty, it is fully merged to "master".

DOC_END

FILE: .git/hooks/pre-receive.sample
Kind: text
Size: 544
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to make use of push options.
# The example simply echoes all push options that start with 'echoback='
# and rejects all pushes when the "reject" push option is used.
#
# To enable this hook, rename this file to "pre-receive".

if test -n "$GIT_PUSH_OPTION_COUNT"
then
	i=0
	while test "$i" -lt "$GIT_PUSH_OPTION_COUNT"
	do
		eval "value=\$GIT_PUSH_OPTION_$i"
		case "$value" in
		echoback=*)
			echo "echo from the pre-receive-hook: ${value#*=}" >&2
			;;
		reject)
			exit 1
		esac
		i=$((i + 1))
	done
fi

FILE: .git/hooks/prepare-commit-msg.sample
Kind: text
Size: 1492
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to prepare the commit log message.
# Called by "git commit" with the name of the file that has the
# commit message, followed by the description of the commit
# message's source.  The hook's purpose is to edit the commit
# message file.  If the hook fails with a non-zero status,
# the commit is aborted.
#
# To enable this hook, rename this file to "prepare-commit-msg".

# This hook includes three examples. The first one removes the
# "# Please enter the commit message..." help message.
#
# The second includes the output of "git diff --name-status -r"
# into the message, just before the "git status" output.  It is
# commented because it doesn't cope with --amend or with squashed
# commits.
#
# The third example adds a Signed-off-by line to the message, that can
# still be edited.  This is rarely a good idea.

COMMIT_MSG_FILE=$1
COMMIT_SOURCE=$2
SHA1=$3

/usr/bin/perl -i.bak -ne 'print unless(m/^. Please enter the commit message/..m/^#$/)' "$COMMIT_MSG_FILE"

# case "$COMMIT_SOURCE,$SHA1" in
#  ,|template,)
#    /usr/bin/perl -i.bak -pe '
#       print "\n" . `git diff --cached --name-status -r`
# 	 if /^#/ && $first++ == 0' "$COMMIT_MSG_FILE" ;;
#  *) ;;
# esac

# SOB=$(git var GIT_COMMITTER_IDENT | sed -n 's/^\(.*>\).*$/Signed-off-by: \1/p')
# git interpret-trailers --in-place --trailer "$SOB" "$COMMIT_MSG_FILE"
# if test -z "$COMMIT_SOURCE"
# then
#   /usr/bin/perl -i.bak -pe 'print "\n" if !$first_line++' "$COMMIT_MSG_FILE"
# fi

FILE: .git/hooks/push-to-checkout.sample
Kind: text
Size: 2783
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh

# An example hook script to update a checked-out tree on a git push.
#
# This hook is invoked by git-receive-pack(1) when it reacts to git
# push and updates reference(s) in its repository, and when the push
# tries to update the branch that is currently checked out and the
# receive.denyCurrentBranch configuration variable is set to
# updateInstead.
#
# By default, such a push is refused if the working tree and the index
# of the remote repository has any difference from the currently
# checked out commit; when both the working tree and the index match
# the current commit, they are updated to match the newly pushed tip
# of the branch. This hook is to be used to override the default
# behaviour; however the code below reimplements the default behaviour
# as a starting point for convenient modification.
#
# The hook receives the commit with which the tip of the current
# branch is going to be updated:
commit=$1

# It can exit with a non-zero status to refuse the push (when it does
# so, it must not modify the index or the working tree).
die () {
	echo >&2 "$*"
	exit 1
}

# Or it can make any necessary changes to the working tree and to the
# index to bring them to the desired state when the tip of the current
# branch is updated to the new commit, and exit with a zero status.
#
# For example, the hook can simply run git read-tree -u -m HEAD "$1"
# in order to emulate git fetch that is run in the reverse direction
# with git push, as the two-tree form of git read-tree -u -m is
# essentially the same as git switch or git checkout that switches
# branches while keeping the local changes in the working tree that do
# not interfere with the difference between the branches.

# The below is a more-or-less exact translation to shell of the C code
# for the default behaviour for git's push-to-checkout hook defined in
# the push_to_deploy() function in builtin/receive-pack.c.
#
# Note that the hook will be executed from the repository directory,
# not from the working tree, so if you want to perform operations on
# the working tree, you will have to adapt your code accordingly, e.g.
# by adding "cd .." or using relative paths.

if ! git update-index -q --ignore-submodules --refresh
then
	die "Up-to-date check failed"
fi

if ! git diff-files --quiet --ignore-submodules --
then
	die "Working directory has unstaged changes"
fi

# This is a rough translation of:
#
#   head_has_history() ? "HEAD" : EMPTY_TREE_SHA1_HEX
if git cat-file -e HEAD 2>/dev/null
then
	head=HEAD
else
	head=$(git hash-object -t tree --stdin </dev/null)
fi

if ! git diff-index --quiet --cached --ignore-submodules $head --
then
	die "Working directory has staged changes"
fi

if ! git read-tree -u -m "$commit"
then
	die "Could not update working tree to new HEAD"
fi

FILE: .git/hooks/sendemail-validate.sample
Kind: text
Size: 2308
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh

# An example hook script to validate a patch (and/or patch series) before
# sending it via email.
#
# The hook should exit with non-zero status after issuing an appropriate
# message if it wants to prevent the email(s) from being sent.
#
# To enable this hook, rename this file to "sendemail-validate".
#
# By default, it will only check that the patch(es) can be applied on top of
# the default upstream branch without conflicts in a secondary worktree. After
# validation (successful or not) of the last patch of a series, the worktree
# will be deleted.
#
# The following config variables can be set to change the default remote and
# remote ref that are used to apply the patches against:
#
#   sendemail.validateRemote (default: origin)
#   sendemail.validateRemoteRef (default: HEAD)
#
# Replace the TODO placeholders with appropriate checks according to your
# needs.

validate_cover_letter () {
	file="$1"
	# TODO: Replace with appropriate checks (e.g. spell checking).
	true
}

validate_patch () {
	file="$1"
	# Ensure that the patch applies without conflicts.
	git am -3 "$file" || return
	# TODO: Replace with appropriate checks for this patch
	# (e.g. checkpatch.pl).
	true
}

validate_series () {
	# TODO: Replace with appropriate checks for the whole series
	# (e.g. quick build, coding style checks, etc.).
	true
}

# main -------------------------------------------------------------------------

if test "$GIT_SENDEMAIL_FILE_COUNTER" = 1
then
	remote=$(git config --default origin --get sendemail.validateRemote) &&
	ref=$(git config --default HEAD --get sendemail.validateRemoteRef) &&
	worktree=$(mktemp --tmpdir -d sendemail-validate.XXXXXXX) &&
	git worktree add -fd --checkout "$worktree" "refs/remotes/$remote/$ref" &&
	git config --replace-all sendemail.validateWorktree "$worktree"
else
	worktree=$(git config --get sendemail.validateWorktree)
fi || {
	echo "sendemail-validate: error: failed to prepare worktree" >&2
	exit 1
}

unset GIT_DIR GIT_WORK_TREE
cd "$worktree" &&

if grep -q "^diff --git " "$1"
then
	validate_patch "$1"
else
	validate_cover_letter "$1"
fi &&

if test "$GIT_SENDEMAIL_FILE_COUNTER" = "$GIT_SENDEMAIL_FILE_TOTAL"
then
	git config --unset-all sendemail.validateWorktree &&
	trap 'git worktree remove -ff "$worktree"' EXIT &&
	validate_series
fi

FILE: .git/hooks/update.sample
Kind: text
Size: 3650
Last modified: 2026-01-20T07:01:55.706058+00:00

CONTENT:
#!/bin/sh
#
# An example hook script to block unannotated tags from entering.
# Called by "git receive-pack" with arguments: refname sha1-old sha1-new
#
# To enable this hook, rename this file to "update".
#
# Config
# ------
# hooks.allowunannotated
#   This boolean sets whether unannotated tags will be allowed into the
#   repository.  By default they won't be.
# hooks.allowdeletetag
#   This boolean sets whether deleting tags will be allowed in the
#   repository.  By default they won't be.
# hooks.allowmodifytag
#   This boolean sets whether a tag may be modified after creation. By default
#   it won't be.
# hooks.allowdeletebranch
#   This boolean sets whether deleting branches will be allowed in the
#   repository.  By default they won't be.
# hooks.denycreatebranch
#   This boolean sets whether remotely creating branches will be denied
#   in the repository.  By default this is allowed.
#

# --- Command line
refname="$1"
oldrev="$2"
newrev="$3"

# --- Safety check
if [ -z "$GIT_DIR" ]; then
	echo "Don't run this script from the command line." >&2
	echo " (if you want, you could supply GIT_DIR then run" >&2
	echo "  $0 <ref> <oldrev> <newrev>)" >&2
	exit 1
fi

if [ -z "$refname" -o -z "$oldrev" -o -z "$newrev" ]; then
	echo "usage: $0 <ref> <oldrev> <newrev>" >&2
	exit 1
fi

# --- Config
allowunannotated=$(git config --type=bool hooks.allowunannotated)
allowdeletebranch=$(git config --type=bool hooks.allowdeletebranch)
denycreatebranch=$(git config --type=bool hooks.denycreatebranch)
allowdeletetag=$(git config --type=bool hooks.allowdeletetag)
allowmodifytag=$(git config --type=bool hooks.allowmodifytag)

# check for no description
projectdesc=$(sed -e '1q' "$GIT_DIR/description")
case "$projectdesc" in
"Unnamed repository"* | "")
	echo "*** Project description file hasn't been set" >&2
	exit 1
	;;
esac

# --- Check types
# if $newrev is 0000...0000, it's a commit to delete a ref.
zero=$(git hash-object --stdin </dev/null | tr '[0-9a-f]' '0')
if [ "$newrev" = "$zero" ]; then
	newrev_type=delete
else
	newrev_type=$(git cat-file -t $newrev)
fi

case "$refname","$newrev_type" in
	refs/tags/*,commit)
		# un-annotated tag
		short_refname=${refname##refs/tags/}
		if [ "$allowunannotated" != "true" ]; then
			echo "*** The un-annotated tag, $short_refname, is not allowed in this repository" >&2
			echo "*** Use 'git tag [ -a | -s ]' for tags you want to propagate." >&2
			exit 1
		fi
		;;
	refs/tags/*,delete)
		# delete tag
		if [ "$allowdeletetag" != "true" ]; then
			echo "*** Deleting a tag is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/tags/*,tag)
		# annotated tag
		if [ "$allowmodifytag" != "true" ] && git rev-parse $refname > /dev/null 2>&1
		then
			echo "*** Tag '$refname' already exists." >&2
			echo "*** Modifying a tag is not allowed in this repository." >&2
			exit 1
		fi
		;;
	refs/heads/*,commit)
		# branch
		if [ "$oldrev" = "$zero" -a "$denycreatebranch" = "true" ]; then
			echo "*** Creating a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/heads/*,delete)
		# delete branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	refs/remotes/*,commit)
		# tracking branch
		;;
	refs/remotes/*,delete)
		# delete tracking branch
		if [ "$allowdeletebranch" != "true" ]; then
			echo "*** Deleting a tracking branch is not allowed in this repository" >&2
			exit 1
		fi
		;;
	*)
		# Anything else (is there anything else?)
		echo "*** Update hook: unknown type of update to ref $refname of type $newrev_type" >&2
		exit 1
		;;
esac

# --- Finished
exit 0

FILE: .git/index
Kind: binary
Size: 6263
Last modified: 2026-01-20T13:53:31.471814+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 6263
detected type: unknown

FILE: .git/info/exclude
Kind: text
Size: 240
Last modified: 2026-01-20T07:01:55.702058+00:00

CONTENT:
# git ls-files --others --exclude-from=.git/info/exclude
# Lines that start with '#' are comments.
# For a project mostly in C, the following would be a good set of
# exclude patterns (uncomment them if you want to use them):
# *.[oa]
# *~

FILE: .git/logs/HEAD
Kind: text
Size: 715
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
0000000000000000000000000000000000000000 c76b8a7c7e17f3752566b17ace4dd87889660908 Codex <codex@openai.com> 1768892516 +0000	checkout: moving from master to work
c76b8a7c7e17f3752566b17ace4dd87889660908 0000000000000000000000000000000000000000 Codex <codex@openai.com> 1768917211 +0000	Branch: renamed refs/heads/work to refs/heads/old_work-1768917208
0000000000000000000000000000000000000000 c76b8a7c7e17f3752566b17ace4dd87889660908 Codex <codex@openai.com> 1768917211 +0000	Branch: renamed refs/heads/work to refs/heads/old_work-1768917208
c76b8a7c7e17f3752566b17ace4dd87889660908 8e965b6429e839bfe74091cb41721308255fca12 Codex <codex@openai.com> 1768917211 +0000	checkout: moving from old_work-1768917208 to work

FILE: .git/logs/refs/heads/work
Kind: text
Size: 156
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
0000000000000000000000000000000000000000 8e965b6429e839bfe74091cb41721308255fca12 Codex <codex@openai.com> 1768917211 +0000	branch: Created from FETCH_HEAD

FILE: .git/objects/00/f1f3894d0208b5956d66d0a21808d20a69265c
Kind: binary
Size: 410
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 410
detected type: unknown

FILE: .git/objects/0f/07f8f92027b7430666d53ac042c34ca6f7940e
Kind: binary
Size: 410
Last modified: 2026-01-20T13:53:31.347816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 410
detected type: unknown

FILE: .git/objects/11/093babff05fe82b756da40086739ccd28fffe2
Kind: binary
Size: 951
Last modified: 2026-01-20T13:53:31.323816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 951
detected type: unknown

FILE: .git/objects/11/8623066910d226e08436061084196071197ea7
Kind: binary
Size: 51
Last modified: 2026-01-20T13:53:31.355816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 51
detected type: unknown

FILE: .git/objects/18/d3c22712584d510b48e230f3fea33314b2e8ba
Kind: binary
Size: 51
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 51
detected type: unknown

FILE: .git/objects/1c/a88be3afc0e6f521be1cab512decef2a9e3398
Kind: binary
Size: 1635
Last modified: 2026-01-20T13:53:31.343816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1635
detected type: unknown

FILE: .git/objects/27/f67bfc822ae33ac6638913e5f26fc36d13c2df
Kind: binary
Size: 573
Last modified: 2026-01-20T13:53:31.327816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 573
detected type: unknown

FILE: .git/objects/30/a7037f84f0e3acd9770ead68385516ec63eed3
Kind: binary
Size: 292
Last modified: 2026-01-20T13:53:31.335816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 292
detected type: unknown

FILE: .git/objects/34/a5f4700ef3ba5c89fe8cb131521280ce7ddce3
Kind: binary
Size: 482
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 482
detected type: unknown

FILE: .git/objects/3c/34aa33b2ded8a285cd2d2c074489c17fa53f33
Kind: binary
Size: 143
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 143
detected type: unknown

FILE: .git/objects/41/7d9aff9fac533feb31958958652d5c99abe455
Kind: binary
Size: 954
Last modified: 2026-01-20T13:53:31.323816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 954
detected type: unknown

FILE: .git/objects/4a/09cca8592af5088ebd4045fa71c1ac3461406d
Kind: binary
Size: 143
Last modified: 2026-01-20T13:53:31.367815+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 143
detected type: unknown

FILE: .git/objects/4b/1bdf8568d03c8b5970fa94d62146d89cb249c1
Kind: binary
Size: 51
Last modified: 2026-01-20T13:53:31.367815+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 51
detected type: unknown

FILE: .git/objects/4d/fe985e9b2b61f0c2d29c48d6487777a3fa0974
Kind: binary
Size: 574
Last modified: 2026-01-20T13:53:31.367815+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 574
detected type: unknown

FILE: .git/objects/54/8d490c22cf5ab31cfecaeab9c7ec2725355943
Kind: binary
Size: 410
Last modified: 2026-01-20T13:53:31.363816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 410
detected type: unknown

FILE: .git/objects/58/317e2614fdf0ab63a70c59563781aa46ff51d0
Kind: binary
Size: 213
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 213
detected type: unknown

FILE: .git/objects/60/eb905063a5f0dadeea166ea0d020a103a233fd
Kind: binary
Size: 481
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 481
detected type: unknown

FILE: .git/objects/60/ef7814cea07c03f5bf7cfe5e9ee75d45ae7399
Kind: binary
Size: 763
Last modified: 2026-01-20T13:53:31.363816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 763
detected type: unknown

FILE: .git/objects/62/d79202f3566222591deb60b79429717275c21d
Kind: binary
Size: 1757
Last modified: 2026-01-20T13:53:31.331816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1757
detected type: unknown

FILE: .git/objects/65/5cdcad2a9f28dc48684726c7ca0e8c1a0f6e91
Kind: binary
Size: 181
Last modified: 2026-01-20T13:53:31.331816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 181
detected type: unknown

FILE: .git/objects/6a/1134c3a345130189e446085b927a32d87708ff
Kind: binary
Size: 214
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 214
detected type: unknown

FILE: .git/objects/6d/620aa316bff6f7929dca8deb38da38225672e3
Kind: binary
Size: 238
Last modified: 2026-01-20T13:53:31.335816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 238
detected type: unknown

FILE: .git/objects/6e/0e0c2bb1fbd4c464f781e947c5e75cb23d5244
Kind: binary
Size: 1777
Last modified: 2026-01-20T13:53:31.363816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1777
detected type: unknown

FILE: .git/objects/6e/5e85e0c26a9d7b0d51c136e6ca3b55f0db44a7
Kind: binary
Size: 802
Last modified: 2026-01-20T13:53:31.339816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 802
detected type: unknown

FILE: .git/objects/6e/cd5b474d60d771ab2cb0bc6b98f4c6bc819347
Kind: binary
Size: 455
Last modified: 2026-01-20T13:53:31.347816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 455
detected type: unknown

FILE: .git/objects/72/6e3b37fd2aea01a12e5647e6542240bed9cb09
Kind: binary
Size: 233
Last modified: 2026-01-20T13:53:31.327816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 233
detected type: unknown

FILE: .git/objects/76/2d2eb7e6aa1144f785cd285cb9c97f19166f43
Kind: binary
Size: 183
Last modified: 2026-01-20T13:53:31.323816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 183
detected type: unknown

FILE: .git/objects/7b/d76e448e2b4945577d9bf1acb293a44d260de3
Kind: binary
Size: 414
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 414
detected type: unknown

FILE: .git/objects/7b/d7bf4c502d7c05c17338e3b4a89cb78ee00515
Kind: binary
Size: 828
Last modified: 2026-01-20T13:53:31.335816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 828
detected type: unknown

FILE: .git/objects/84/91c860cecbf4b84ab178a5d4b774c7cd2697e4
Kind: binary
Size: 973
Last modified: 2026-01-20T13:53:31.355816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 973
detected type: unknown

FILE: .git/objects/8b/2156373efd139ecdb48704ff3e4a408aa29d04
Kind: binary
Size: 247
Last modified: 2026-01-20T13:53:31.339816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 247
detected type: unknown

FILE: .git/objects/8e/965b6429e839bfe74091cb41721308255fca12
Kind: binary
Size: 946
Last modified: 2026-01-20T13:53:31.319816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 946
detected type: unknown

FILE: .git/objects/92/2a9bafa643eb991634b97e7b561661d9139126
Kind: binary
Size: 572
Last modified: 2026-01-20T13:53:31.355816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 572
detected type: unknown

FILE: .git/objects/9c/ce8992c65b2a38a81bcc8b18d54f996e847bdd
Kind: binary
Size: 203
Last modified: 2026-01-20T13:53:31.331816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 203
detected type: unknown

FILE: .git/objects/9d/0018ced08a1e285f73ff7dcea47a1b9f84b294
Kind: binary
Size: 214
Last modified: 2026-01-20T13:53:31.363816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 214
detected type: unknown

FILE: .git/objects/a3/29b093830c669ebcbb2bb1ed1330a4ec65b978
Kind: binary
Size: 51
Last modified: 2026-01-20T13:53:31.327816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 51
detected type: unknown

FILE: .git/objects/a5/8516191009cd265e20d03d16356fbcf2a0abd4
Kind: binary
Size: 474
Last modified: 2026-01-20T13:53:31.363816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 474
detected type: unknown

FILE: .git/objects/ac/5a1fcc20775898adbe993f0c28d42cde33e766
Kind: binary
Size: 456
Last modified: 2026-01-20T13:53:31.339816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 456
detected type: unknown

FILE: .git/objects/ac/b9856d494bab326d3ec48b14c1a7e3b7224d2c
Kind: binary
Size: 463
Last modified: 2026-01-20T13:53:31.347816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 463
detected type: unknown

FILE: .git/objects/b5/03742da0f85f5510af17103b278bc82516a900
Kind: binary
Size: 186
Last modified: 2026-01-20T13:53:31.355816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 186
detected type: unknown

FILE: .git/objects/b5/8579777a5a26995da1e0376e9813163733e42b
Kind: binary
Size: 190
Last modified: 2026-01-20T13:53:31.323816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 190
detected type: unknown

FILE: .git/objects/be/b70f86b62b93f7eb130c7ad37de04706d79da9
Kind: binary
Size: 474
Last modified: 2026-01-20T13:53:31.347816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 474
detected type: unknown

FILE: .git/objects/d0/2fd244143ee9c3e3f628958d70004391a5ce07
Kind: binary
Size: 82
Last modified: 2026-01-20T13:53:31.327816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 82
detected type: unknown

FILE: .git/objects/d0/8f3c0a046f07972824596280f33d642f1a4012
Kind: binary
Size: 780
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 780
detected type: unknown

FILE: .git/objects/d0/e35baa7c334bc355d43af18a6f76c2c6f7e692
Kind: binary
Size: 733
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 733
detected type: unknown

FILE: .git/objects/d0/f03571e3575b3798a91c0fdd9be8e33b6c44b6
Kind: binary
Size: 1228
Last modified: 2026-01-20T13:53:31.339816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1228
detected type: unknown

FILE: .git/objects/d3/d44026a76c68271c79b119763a7ababba263af
Kind: binary
Size: 1565
Last modified: 2026-01-20T13:53:31.331816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1565
detected type: unknown

FILE: .git/objects/d6/c90a533a8091180f58c7d0ca8234f1dab9c846
Kind: binary
Size: 83
Last modified: 2026-01-20T13:53:31.355816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 83
detected type: unknown

FILE: .git/objects/e1/04af5dbd607ca5e9f6e34c99f86214c699f622
Kind: binary
Size: 936
Last modified: 2026-01-20T13:53:31.323816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 936
detected type: unknown

FILE: .git/objects/ec/51961d6fb705a2b71aa2a1a5d92fbcc0dc781c
Kind: binary
Size: 657
Last modified: 2026-01-20T13:53:31.347816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 657
detected type: unknown

FILE: .git/objects/ee/17cb5c1bfd5fb1df6a7eac3fef3019c801b690
Kind: binary
Size: 1413
Last modified: 2026-01-20T13:53:31.343816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 1413
detected type: unknown

FILE: .git/objects/f9/4588c40c8b262e555321590c1fb5684f042483
Kind: binary
Size: 116
Last modified: 2026-01-20T13:53:31.335816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 116
detected type: unknown

FILE: .git/objects/f9/5076afd1667aa5755a53e9237d406d555f082b
Kind: binary
Size: 163
Last modified: 2026-01-20T13:53:31.367815+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 163
detected type: unknown

FILE: .git/objects/fa/3d632c2cd5e722eb31c6c8f5dc07b36eb5ecd7
Kind: binary
Size: 435
Last modified: 2026-01-20T13:53:31.351816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 435
detected type: unknown

FILE: .git/objects/fa/966eac8282ffa8da204cc02007b871cc912a43
Kind: binary
Size: 574
Last modified: 2026-01-20T13:53:31.359816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 574
detected type: unknown

FILE: .git/objects/fc/8122e2ab2e9d2e3430a19f158bb71e2481640e
Kind: binary
Size: 192
Last modified: 2026-01-20T13:53:31.327816+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 192
detected type: unknown

FILE: .git/objects/pack/pack-e37421529fb54870d8e275e3039a244c7b87e337.idx
Kind: binary
Size: 4488
Last modified: 2026-01-20T07:01:56.467157+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 4488
detected type: unknown

FILE: .git/objects/pack/pack-e37421529fb54870d8e275e3039a244c7b87e337.pack
Kind: binary
Size: 56047
Last modified: 2026-01-20T07:01:56.467157+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 56047
detected type: unknown

FILE: .git/objects/pack/pack-e37421529fb54870d8e275e3039a244c7b87e337.rev
Kind: binary
Size: 540
Last modified: 2026-01-20T07:01:56.483436+00:00

CONTENT:
BINARY FILE — NOT DISPLAYED
file size: 540
detected type: unknown

FILE: .git/packed-refs
Kind: text
Size: 46
Last modified: 2026-01-20T13:53:31.455814+00:00

CONTENT:
# pack-refs with: peeled fully-peeled sorted 

FILE: .git/refs/heads/work
Kind: text
Size: 41
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
8e965b6429e839bfe74091cb41721308255fca12

FILE: .github/workflows/ci.yml
Kind: text
Size: 381
Last modified: 2026-01-20T13:53:31.423815+00:00

CONTENT:
name: CI

on:
  pull_request:
  push:
    branches: [main]

jobs:
  lint-docs:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: '3.11'
      - run: python -m pip install --upgrade pip
      - run: pip install -e .[dev]
      - run: ruff check .
      - run: mkdocs build --strict

FILE: .github/workflows/physics.yml
Kind: text
Size: 265
Last modified: 2026-01-20T13:53:31.423815+00:00

CONTENT:
name: physics

permissions:
  contents: read

on:
  push:
  pull_request:

jobs:
  boundary-checks:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Run physics tests
        run: scripts/physics_tests.sh

FILE: .gitignore
Kind: text
Size: 210
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
# Python
__pycache__/
*.py[cod]
*.pyo
*.pyd
*.so
.mypy_cache/
.pytest_cache/
.cache/

# Packaging
build/
dist/
*.egg-info/

# Environments
.venv/
.env/

# Editors
.idea/
.vscode/

# Telemetry output
telemetry/

FILE: CHANGELOG.md
Kind: text
Size: 192
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
# Changelog

## [0.1.0] - 2024-01-01
- Initial enterprise cockpit scaffold.
- Typer CLI, Textual TUI stubs, FastAPI server skeleton.
- Documentation suite, CI/CD, and packaging configuration.

FILE: CODE_OF_CONDUCT.md
Kind: text
Size: 350
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
# Code of Conduct

BLUX Commander follows the [Contributor Covenant](https://www.contributor-covenant.org/).

- Be respectful and inclusive.
- Provide constructive feedback.
- Report unacceptable behavior to ops@blux.systems.

Instances of abusive, harassing, or otherwise unacceptable behavior may be reported by contacting
the project maintainers.

FILE: COMMERCIAL.md
Kind: text
Size: 740
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
# Commercial Licensing

BLUX Commander is dual-licensed. Open-source use is permitted under the Apache License 2.0. If you
plan to use the software for commercial purposes, you must obtain a commercial license.

## When a commercial license is required
- Embedding BLUX Commander into a paid or revenue-generating product or platform.
- Offering BLUX Commander as a hosted or managed service for customers.
- Integrating BLUX Commander into internal proprietary systems at scale or where redistribution is
  expected.
- Any other business use that goes beyond the permissions granted by the Apache License 2.0.

## How to obtain a commercial license
Email theoutervoid@outlook.com to discuss commercial terms and obtain written permission.

FILE: CONTRIBUTING.md
Kind: text
Size: 517
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
# Contributing

Thank you for considering a contribution to BLUX Commander!

## Development Environment

1. Create a virtual environment.
2. Install dependencies: `pip install -e .[dev]`.
3. Run `ruff`, `mypy`, and `pytest` before opening a pull request.

## Commit Guidelines

- Follow Conventional Commit semantics when possible.
- Include documentation updates for new features.
- Add tests for new modules or behaviors.

## Code of Conduct

Participation is governed by the [Code of Conduct](CODE_OF_CONDUCT.md).

FILE: LICENSE
Kind: text
Size: 296
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
This project is dual-licensed.

- Open-source use is provided under the Apache License 2.0 in LICENSE-APACHE.
- Commercial and proprietary use requires a separate commercial license in LICENSE-COMMERCIAL.

See the README for details and contact theoutervoid@outlook.com for commercial licensing.

FILE: LICENSE-APACHE
Kind: text
Size: 11357
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
                                 Apache License
                           Version 2.0, January 2004
                        http://www.apache.org/licenses/

   TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION

   1. Definitions.

      "License" shall mean the terms and conditions for use, reproduction,
      and distribution as defined by Sections 1 through 9 of this document.

      "Licensor" shall mean the copyright owner or entity authorized by
      the copyright owner that is granting the License.

      "Legal Entity" shall mean the union of the acting entity and all
      other entities that control, are controlled by, or are under common
      control with that entity. For the purposes of this definition,
      "control" means (i) the power, direct or indirect, to cause the
      direction or management of such entity, whether by contract or
      otherwise, or (ii) ownership of fifty percent (50%) or more of the
      outstanding shares, or (iii) beneficial ownership of such entity.

      "You" (or "Your") shall mean an individual or Legal Entity
      exercising permissions granted by this License.

      "Source" form shall mean the preferred form for making modifications,
      including but not limited to software source code, documentation
      source, and configuration files.

      "Object" form shall mean any form resulting from mechanical
      transformation or translation of a Source form, including but
      not limited to compiled object code, generated documentation,
      and conversions to other media types.

      "Work" shall mean the work of authorship, whether in Source or
      Object form, made available under the License, as indicated by a
      copyright notice that is included in or attached to the work
      (an example is provided in the Appendix below).

      "Derivative Works" shall mean any work, whether in Source or Object
      form, that is based on (or derived from) the Work and for which the
      editorial revisions, annotations, elaborations, or other modifications
      represent, as a whole, an original work of authorship. For the purposes
      of this License, Derivative Works shall not include works that remain
      separable from, or merely link (or bind by name) to the interfaces of,
      the Work and Derivative Works thereof.

      "Contribution" shall mean any work of authorship, including
      the original version of the Work and any modifications or additions
      to that Work or Derivative Works thereof, that is intentionally
      submitted to Licensor for inclusion in the Work by the copyright owner
      or by an individual or Legal Entity authorized to submit on behalf of
      the copyright owner. For the purposes of this definition, "submitted"
      means any form of electronic, verbal, or written communication sent
      to the Licensor or its representatives, including but not limited to
      communication on electronic mailing lists, source code control systems,
      and issue tracking systems that are managed by, or on behalf of, the
      Licensor for the purpose of discussing and improving the Work, but
      excluding communication that is conspicuously marked or otherwise
      designated in writing by the copyright owner as "Not a Contribution."

      "Contributor" shall mean Licensor and any individual or Legal Entity
      on behalf of whom a Contribution has been received by Licensor and
      subsequently incorporated within the Work.

   2. Grant of Copyright License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      copyright license to reproduce, prepare Derivative Works of,
      publicly display, publicly perform, sublicense, and distribute the
      Work and such Derivative Works in Source or Object form.

   3. Grant of Patent License. Subject to the terms and conditions of
      this License, each Contributor hereby grants to You a perpetual,
      worldwide, non-exclusive, no-charge, royalty-free, irrevocable
      (except as stated in this section) patent license to make, have made,
      use, offer to sell, sell, import, and otherwise transfer the Work,
      where such license applies only to those patent claims licensable
      by such Contributor that are necessarily infringed by their
      Contribution(s) alone or by combination of their Contribution(s)
      with the Work to which such Contribution(s) was submitted. If You
      institute patent litigation against any entity (including a
      cross-claim or counterclaim in a lawsuit) alleging that the Work
      or a Contribution incorporated within the Work constitutes direct
      or contributory patent infringement, then any patent licenses
      granted to You under this License for that Work shall terminate
      as of the date such litigation is filed.

   4. Redistribution. You may reproduce and distribute copies of the
      Work or Derivative Works thereof in any medium, with or without
      modifications, and in Source or Object form, provided that You
      meet the following conditions:

      (a) You must give any other recipients of the Work or
          Derivative Works a copy of this License; and

      (b) You must cause any modified files to carry prominent notices
          stating that You changed the files; and

      (c) You must retain, in the Source form of any Derivative Works
          that You distribute, all copyright, patent, trademark, and
          attribution notices from the Source form of the Work,
          excluding those notices that do not pertain to any part of
          the Derivative Works; and

      (d) If the Work includes a "NOTICE" text file as part of its
          distribution, then any Derivative Works that You distribute must
          include a readable copy of the attribution notices contained
          within such NOTICE file, excluding those notices that do not
          pertain to any part of the Derivative Works, in at least one
          of the following places: within a NOTICE text file distributed
          as part of the Derivative Works; within the Source form or
          documentation, if provided along with the Derivative Works; or,
          within a display generated by the Derivative Works, if and
          wherever such third-party notices normally appear. The contents
          of the NOTICE file are for informational purposes only and
          do not modify the License. You may add Your own attribution
          notices within Derivative Works that You distribute, alongside
          or as an addendum to the NOTICE text from the Work, provided
          that such additional attribution notices cannot be construed
          as modifying the License.

      You may add Your own copyright statement to Your modifications and
      may provide additional or different license terms and conditions
      for use, reproduction, or distribution of Your modifications, or
      for any such Derivative Works as a whole, provided Your use,
      reproduction, and distribution of the Work otherwise complies with
      the conditions stated in this License.

   5. Submission of Contributions. Unless You explicitly state otherwise,
      any Contribution intentionally submitted for inclusion in the Work
      by You to the Licensor shall be under the terms and conditions of
      this License, without any additional terms or conditions.
      Notwithstanding the above, nothing herein shall supersede or modify
      the terms of any separate license agreement you may have executed
      with Licensor regarding such Contributions.

   6. Trademarks. This License does not grant permission to use the trade
      names, trademarks, service marks, or product names of the Licensor,
      except as required for reasonable and customary use in describing the
      origin of the Work and reproducing the content of the NOTICE file.

   7. Disclaimer of Warranty. Unless required by applicable law or
      agreed to in writing, Licensor provides the Work (and each
      Contributor provides its Contributions) on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
      implied, including, without limitation, any warranties or conditions
      of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
      PARTICULAR PURPOSE. You are solely responsible for determining the
      appropriateness of using or redistributing the Work and assume any
      risks associated with Your exercise of permissions under this License.

   8. Limitation of Liability. In no event and under no legal theory,
      whether in tort (including negligence), contract, or otherwise,
      unless required by applicable law (such as deliberate and grossly
      negligent acts) or agreed to in writing, shall any Contributor be
      liable to You for damages, including any direct, indirect, special,
      incidental, or consequential damages of any character arising as a
      result of this License or out of the use or inability to use the
      Work (including but not limited to damages for loss of goodwill,
      work stoppage, computer failure or malfunction, or any and all
      other commercial damages or losses), even if such Contributor
      has been advised of the possibility of such damages.

   9. Accepting Warranty or Additional Liability. While redistributing
      the Work or Derivative Works thereof, You may choose to offer,
      and charge a fee for, acceptance of support, warranty, indemnity,
      or other liability obligations and/or rights consistent with this
      License. However, in accepting such obligations, You may act only
      on Your own behalf and on Your sole responsibility, not on behalf
      of any other Contributor, and only if You agree to indemnify,
      defend, and hold each Contributor harmless for any liability
      incurred by, or claims asserted against, such Contributor by reason
      of your accepting any such warranty or additional liability.

   END OF TERMS AND CONDITIONS

   APPENDIX: How to apply the Apache License to your work.

      To apply the Apache License to your work, attach the following
      boilerplate notice, with the fields enclosed by brackets "[]"
      replaced with your own identifying information. (Don't include
      the brackets!)  The text should be enclosed in the appropriate
      comment syntax for the file format. We also recommend that a
      file or class name and description of purpose be included on the
      same "printed page" as the copyright notice for easier
      identification within third-party archives.

   Copyright [yyyy] [name of copyright owner]

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

FILE: LICENSE-COMMERCIAL
Kind: text
Size: 1239
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
Proprietary Commercial License
Version 1.0

Copyright (c) 2024 BLUX. All rights reserved.

Permission is granted to use this software for internal evaluation and non-commercial purposes only.
Any commercial use, including without limitation embedding, distributing, hosting as a service,
or using within a paid or revenue-generating product, requires a separate written commercial
license from the copyright holder.

You may not modify, distribute, sublicense, rent, lease, lend, or otherwise make the software
available to any third party without prior written permission.

THE SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT
NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, AND
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES, OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT, OR OTHERWISE, ARISING FROM,
OUT OF, OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

This license terminates automatically upon breach. Upon termination, you must cease all use and
destroy all copies of the software.

To obtain a commercial license, contact: theoutervoid@outlook.com

FILE: NOTICE
Kind: text
Size: 142
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
BLUX Commander
Copyright (c) 2024 BLUX

This product includes software licensed under the Apache License 2.0. See LICENSE-APACHE for details.

FILE: README.md
Kind: text
Size: 3881
Last modified: 2026-01-20T13:53:31.423815+00:00

CONTENT:
# BLUX Commander

> BLUX Commander — Read-only observability cockpit

The bridge between mind and machine. The map that moves.

## Overview

BLUX Commander delivers a unified read-only observability cockpit for the BLUX ecosystem. It is
**not a control plane** and performs **no execution**. Developers and operators can visualize
traces, audits, envelope payloads, execution_manifest records, guard_receipt artifacts, and
system status without triggering actions.

### Highlights

- **Read-Only Commander Core** – Aggregate observability status and artifact metadata.
- **Multi-Pane Cockpit** – Operate a Textual dashboard for logs, telemetry, and artifact views.
- **Web Dashboard** – Serve a FastAPI + React cockpit for read-only insights.
- **Artifact Explorer** – Visualize envelope, guard_receipt, execution_manifest, audits, and traces.

<!-- FILETREE:BEGIN -->
<details><summary><strong>Repository File Tree</strong></summary>

```text
├── .github
│   └── workflows
│       ├── ci.yml
│       └── physics.yml
├── .gitignore
├── CHANGELOG.md
├── CODE_OF_CONDUCT.md
├── CONTRIBUTING.md
├── LICENSE
├── README.md
├── blux_commander
│   ├── __init__.py
│   ├── cli.py
│   ├── core
│   │   ├── api.py
│   │   ├── commander.py
│   │   ├── config.py
│   │   ├── plugins.py
│   │   ├── shell.py
│   │   ├── telemetry.py
│   │   └── tui.py
│   ├── integrations
│   │   ├── ca.py
│   │   ├── doctrine.py
│   │   └── quantum.py
│   ├── ui
│   │   ├── panels
│   │   │   ├── ai_panel.py
│   │   │   ├── logs_panel.py
│   │   │   ├── plugins_panel.py
│   │   │   ├── telemetry_panel.py
│   │   │   └── terminal_panel.py
│   │   └── themes
│   │       ├── default.tcss
│   │       └── highcontrast.tcss
│   └── web
│       ├── auth.py
│       ├── commands.py
│       ├── insights.py
│       ├── server.py
│       ├── static
│       │   ├── app.js
│       │   └── assets
│       │       └── style.css
│       ├── storage.py
│       └── templates
│           └── index.html
├── docs
│   ├── API.md
│   ├── ARCHITECTURE.md
│   ├── CONFIGURATION.md
│   ├── INSTALL.md
│   ├── INTEGRATIONS.md
│   ├── OPERATIONS.md
│   ├── ROLE.md
│   ├── ROADMAP.md
│   ├── SECURITY.md
│   ├── THEMES.md
│   ├── TROUBLESHOOTING.md
│   └── index.md
├── mkdocs.yml
├── pyproject.toml
├── scripts
│   ├── build_docs.sh
│   ├── gen_filetree.py
│   ├── run_tui_demo.py
│   └── update_readme_filetree.py
└── tests
    ├── test_cli.py
    ├── test_plugins.py
    ├── test_shell.py
    ├── test_tui.py
    └── test_web_dashboard.py
```

</details>
<!-- FILETREE:END -->

Run `python scripts/update_readme_filetree.py` to regenerate the tree after modifying the project
structure.

## Quick Start

```bash
pip install -e .[dev]
bluxq cmd status
bluxq cmd dashboard
```

See the [documentation](docs/index.md) for installation, operations, and integration details.

### Web Dashboard

Run the read-only web dashboard locally with:

```bash
uvicorn blux_commander.web.server:app --reload
```

Open <http://127.0.0.1:8000/> to access the React + Tailwind UI.

## Scope / Non-goals

BLUX Commander is a read-only observability cockpit. It is **not a control plane** and performs **no
execution**, **no enforcement**, and **no tokens**. See [docs/ROLE.md](docs/ROLE.md) for the full
scope and boundary checks.

FILE: blux_commander/__init__.py
Kind: text
Size: 345
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""BLUX Commander package initialization."""

from importlib import metadata

__all__ = ["__version__"]

try:
    __version__ = metadata.version("blux-commander")
except metadata.PackageNotFoundError:  # pragma: no cover
    __version__ = "0.1.0"


def get_version() -> str:
    """Return the current package version."""

    return __version__

FILE: blux_commander/cli.py
Kind: text
Size: 2220
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Typer-based command line interface for BLUX Commander."""

from __future__ import annotations

import typer

from blux_commander.core import api, commander, plugins, shell, telemetry, tui

app = typer.Typer(help="BLUX Commander — Unified Cockpit")
cmd_app = typer.Typer(help="Commander control surface")
app.add_typer(cmd_app, name="cmd")

plugins_app = typer.Typer(help="Plugin commands")
telemetry_app = typer.Typer(help="Telemetry commands")
ai_app = typer.Typer(help="AI console commands")

cmd_app.add_typer(plugins_app, name="plugins")
cmd_app.add_typer(telemetry_app, name="telemetry")
cmd_app.add_typer(ai_app, name="ai")

commander.bootstrap()


@cmd_app.command()
def dashboard() -> None:
    """Launch the Textual dashboard."""

    tui.launch_dashboard()


@cmd_app.command(name="shell")
def shell_cmd() -> None:
    """Start the AI developer shell."""

    shell.start_interactive()


@cmd_app.command()
def status(verbose: bool = typer.Option(False, "--verbose", help="Show extended diagnostics")) -> None:
    """Print commander status."""

    commander.print_status(verbose=verbose)


@plugins_app.command("list")
def plugins_list(verbose: bool = typer.Option(False, "--verbose", help="Show discovery paths")) -> None:
    """List registered plugins."""

    plugins.list_registered(verbose=verbose)


@telemetry_app.command("tail")
def telemetry_tail(limit: int = typer.Option(10, help="Number of telemetry entries to show")) -> None:
    """Tail telemetry entries."""

    telemetry.tail(limit=limit)


@ai_app.command()
def ai(reflect: bool = typer.Option(False, "--reflect", help="Enable reflection mode")) -> None:
    """Interact with the AI developer console."""

    if reflect:
        print("Reflection mode activated. Awaiting conscious-agent guidance.")
    else:
        print("AI console ready. Use --reflect for guidance mode.")


@app.command()
def api_server(host: str = "127.0.0.1", port: int = 8000, reload: bool = False) -> None:
    """Run the FastAPI server."""

    api.run(host=host, port=port, reload=reload)


def get_app() -> typer.Typer:
    """Return the Typer app for entry-point exposure."""

    return app


if __name__ == "__main__":  # pragma: no cover
    app()

FILE: blux_commander/core/api.py
Kind: text
Size: 1703
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""FastAPI service exposing commander orchestration."""

from __future__ import annotations

from fastapi import FastAPI
from fastapi.responses import JSONResponse
from prometheus_client import CONTENT_TYPE_LATEST, CollectorRegistry, Gauge, generate_latest
import uvicorn

from blux_commander.core import commander

app = FastAPI(title="BLUX Commander API")
_registry = CollectorRegistry()
_commander_status = Gauge("blux_commander_subsystems", "Subsystem states", ["name"], registry=_registry)


@app.on_event("startup")
async def startup() -> None:
    """Initialize commander state on startup."""

    commander.bootstrap()
    for name, status in commander.state.subsystems.items():
        _commander_status.labels(name=name).set(1 if status == "connected" else 0)


@app.get("/health")
async def health() -> dict[str, str]:
    """Return service health."""

    return {"status": "ok"}


@app.get("/status")
async def status() -> dict[str, dict[str, str]]:
    """Return subsystem status."""

    return {"subsystems": commander.state.subsystems}


@app.post("/commands")
async def execute(command: str) -> JSONResponse:
    """Execute a named workflow command."""

    commander.add_workflow(command)
    return JSONResponse({"accepted": command})


@app.get("/metrics")
async def metrics() -> JSONResponse:
    """Expose Prometheus metrics."""

    payload = generate_latest(_registry)
    return JSONResponse(content=payload.decode("utf-8"), media_type=CONTENT_TYPE_LATEST)


def run(host: str = "127.0.0.1", port: int = 8000, reload: bool = False) -> None:
    """Run the API using uvicorn."""

    uvicorn.run("blux_commander.core.api:app", host=host, port=port, reload=reload)  # noqa: S104

FILE: blux_commander/core/commander.py
Kind: text
Size: 2038
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Core orchestration hub for BLUX Commander."""

from __future__ import annotations

from dataclasses import dataclass, field
from typing import Any, Callable, Dict, List


@dataclass
class CommanderState:
    """Mutable runtime context shared across modules."""

    subsystems: Dict[str, str] = field(default_factory=dict)
    workflows: List[str] = field(default_factory=list)
    event_handlers: Dict[str, List[Callable[[Any], None]]] = field(default_factory=dict)


state = CommanderState()


def register_subsystem(name: str, status: str) -> None:
    """Register a subsystem status entry."""

    state.subsystems[name] = status


def add_workflow(name: str) -> None:
    """Record a workflow chain in the commander state."""

    state.workflows.append(name)


def subscribe(event: str, handler: Callable[[Any], None]) -> None:
    """Register an event handler for the given event."""

    state.event_handlers.setdefault(event, []).append(handler)


def publish(event: str, payload: Any) -> None:
    """Publish an event to all subscribers."""

    for handler in state.event_handlers.get(event, []):
        handler(payload)


def print_status(*, verbose: bool = False) -> None:
    """Print the current commander status to stdout."""

    header = "BLUX Commander Status"
    print(header)
    print("-" * len(header))
    for subsystem, status in sorted(state.subsystems.items()):
        print(f"{subsystem}: {status}")
    if verbose:
        print("\nRegistered workflows:")
        for workflow in state.workflows:
            print(f" - {workflow}")
        print("\nEvent subscriptions:")
        for event, handlers in state.event_handlers.items():
            print(f" - {event}: {len(handlers)} handlers")


def bootstrap() -> None:
    """Initialize default subsystem entries."""

    register_subsystem("traces", "idle")
    register_subsystem("audits", "idle")
    register_subsystem("execution_manifest", "pending")
    register_subsystem("guard_receipt", "pending")
    register_subsystem("envelope", "queued")

FILE: blux_commander/core/config.py
Kind: text
Size: 1555
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Configuration management utilities."""

from __future__ import annotations

import os
from pathlib import Path
from typing import Any, Dict

import yaml

CONFIG_FILENAMES = ["config.yaml", "config.yml"]
USER_CONFIG_DIR = Path.home() / ".config" / "blux-commander"


def load_config() -> Dict[str, Any]:
    """Load configuration from environment, user config, and local files."""

    config: Dict[str, Any] = {}
    config.update(_load_user_config())
    config.update(_load_project_config())
    config.update(_load_env_overrides())
    return config


def _load_user_config() -> Dict[str, Any]:
    """Load configuration from the user directory."""

    for filename in CONFIG_FILENAMES:
        path = USER_CONFIG_DIR / filename
        if path.exists():
            return _read_yaml(path)
    return {}


def _load_project_config() -> Dict[str, Any]:
    """Load configuration from the current working directory."""

    cwd = Path.cwd()
    for filename in CONFIG_FILENAMES:
        path = cwd / filename
        if path.exists():
            return _read_yaml(path)
    return {}


def _load_env_overrides() -> Dict[str, Any]:
    """Load overrides from environment variables."""

    overrides: Dict[str, Any] = {}
    for key, value in os.environ.items():
        if key.startswith("BLUX_CMD_"):
            overrides[key.lower()] = value
    return overrides


def _read_yaml(path: Path) -> Dict[str, Any]:
    """Read YAML data from disk."""

    with path.open("r", encoding="utf-8") as handle:
        return yaml.safe_load(handle) or {}

FILE: blux_commander/core/plugins.py
Kind: text
Size: 934
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Plugin discovery and lifecycle management."""

from __future__ import annotations

import importlib
from importlib import metadata
from typing import Iterable, List

PLUGIN_NAMESPACE = "blux.plugins"


def list_registered(*, verbose: bool = False) -> List[str]:
    """List registered plugin entry points."""

    plugins = sorted(_discover_plugins())
    if plugins:
        print("Registered plugins:")
        for name in plugins:
            print(f" - {name}")
    else:
        print("No plugins registered.")
    if verbose:
        print("\nDiscovery namespace:", PLUGIN_NAMESPACE)
    return plugins


def load(name: str) -> object:
    """Load a plugin module by dotted path."""

    return importlib.import_module(name)


def _discover_plugins() -> Iterable[str]:
    """Discover available plugin modules."""

    for entry_point in metadata.entry_points().select(group=PLUGIN_NAMESPACE):
        yield entry_point.name

FILE: blux_commander/core/shell.py
Kind: text
Size: 590
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Read-only shell stubs for BLUX Commander."""

from __future__ import annotations

from pathlib import Path
from typing import Iterable


def start_interactive(commands: Iterable[str] | None = None) -> None:
    """Reject interactive shells in read-only mode."""

    raise RuntimeError("Interactive shells are disabled in the read-only observability cockpit.")


def run_command(command: str, *, cwd: str | Path | None = None) -> None:
    """Reject command execution in read-only mode."""

    raise RuntimeError("Command execution is disabled in the read-only observability cockpit.")

FILE: blux_commander/core/telemetry.py
Kind: text
Size: 1445
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Telemetry stubs for BLUX Commander."""

from __future__ import annotations

import json
import os
from pathlib import Path
from typing import Iterable

TELEMETRY_DIR = Path(os.environ.get("BLUX_CMD_HOME", Path.home() / ".config" / "blux-commander"))
TELEMETRY_FILE = TELEMETRY_DIR / "logs" / "telemetry.jsonl"


def record(event: dict[str, object]) -> None:
    """Record a telemetry event to the JSONL file."""

    if os.environ.get("BLUX_CMD_TELEMETRY", "on").lower() == "off":
        return
    TELEMETRY_FILE.parent.mkdir(parents=True, exist_ok=True)
    with TELEMETRY_FILE.open("a", encoding="utf-8") as handle:
        handle.write(json.dumps(event, ensure_ascii=False) + "\n")


def tail(limit: int = 10) -> None:
    """Print the last `limit` telemetry entries."""

    if not TELEMETRY_FILE.exists():
        print("No telemetry available yet.")
        return
    with TELEMETRY_FILE.open("r", encoding="utf-8") as handle:
        lines = handle.readlines()[-limit:]
    for line in lines:
        print(line.rstrip())


def load_history(limit: int | None = None) -> Iterable[dict[str, object]]:
    """Yield telemetry events up to the provided limit."""

    if not TELEMETRY_FILE.exists():
        return []
    with TELEMETRY_FILE.open("r", encoding="utf-8") as handle:
        for index, line in enumerate(handle):
            if limit is not None and index >= limit:
                break
            yield json.loads(line)

FILE: blux_commander/core/tui.py
Kind: text
Size: 1369
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Textual dashboard launcher."""

from __future__ import annotations

from textual.app import App, ComposeResult
from textual.containers import Container
from textual.widgets import Footer, Header, Static

from blux_commander.ui.panels.ai_panel import AIPanel
from blux_commander.ui.panels.logs_panel import LogsPanel
from blux_commander.ui.panels.plugins_panel import PluginsPanel
from blux_commander.ui.panels.telemetry_panel import TelemetryPanel
from blux_commander.ui.panels.terminal_panel import TerminalPanel


class CommanderDashboard(App[None]):
    """Main Textual application for the BLUX Commander cockpit."""

    CSS_PATH = "ui/themes/default.tcss"
    TITLE = "BLUX Commander"

    def compose(self) -> ComposeResult:
        """Compose the dashboard layout."""

        yield Header(show_clock=True)
        with Container(id="cockpit"):
            yield PluginsPanel(id="plugins")
            yield TerminalPanel(id="terminal")
            with Container(id="right"):
                yield LogsPanel(id="logs")
                yield TelemetryPanel(id="telemetry")
                yield AIPanel(id="ai")
        yield Footer()
        yield Static("Reflection: Coordination is the art of giving every part its voice.", id="reflection")


def launch_dashboard() -> None:
    """Run the Textual dashboard application."""

    CommanderDashboard().run()

FILE: blux_commander/integrations/ca.py
Kind: text
Size: 243
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""cA integration stub."""

from __future__ import annotations

from blux_commander.core import commander


def register() -> None:
    """Register the cA integration with the commander."""

    commander.register_subsystem("ca", "listening")

FILE: blux_commander/integrations/doctrine.py
Kind: text
Size: 256
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Doctrine integration stub."""

from __future__ import annotations

from blux_commander.core import commander


def register() -> None:
    """Register the Doctrine integration with the commander."""

    commander.register_subsystem("doctrine", "idle")

FILE: blux_commander/integrations/quantum.py
Kind: text
Size: 258
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Quantum integration stub."""

from __future__ import annotations

from blux_commander.core import commander


def register() -> None:
    """Register the Quantum integration with the commander."""

    commander.register_subsystem("quantum", "connected")

FILE: blux_commander/ui/panels/ai_panel.py
Kind: text
Size: 280
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""AI panel widget."""

from __future__ import annotations

from textual.widgets import Static


class AIPanel(Static):
    """Provide AI reflection hints."""

    def on_mount(self) -> None:
        self.update("Reflection terminal ready. Awaiting prompts from cA integration.")

FILE: blux_commander/ui/panels/logs_panel.py
Kind: text
Size: 237
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Logs panel widget."""

from __future__ import annotations

from textual.widgets import Static


class LogsPanel(Static):
    """Display streaming logs."""

    def on_mount(self) -> None:
        self.update("Logs will appear here.")

FILE: blux_commander/ui/panels/plugins_panel.py
Kind: text
Size: 442
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Plugins panel widget."""

from __future__ import annotations

from textual.widgets import Static

from blux_commander.core import plugins


class PluginsPanel(Static):
    """Display available plugins."""

    def on_mount(self) -> None:
        plugin_list = plugins.list_registered()
        if plugin_list:
            lines = "\n".join(plugin_list)
        else:
            lines = "No plugins discovered."
        self.update(lines)

FILE: blux_commander/ui/panels/telemetry_panel.py
Kind: text
Size: 491
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Telemetry panel widget."""

from __future__ import annotations

from textual.widgets import Static

from blux_commander.core import telemetry


class TelemetryPanel(Static):
    """Display telemetry history."""

    def on_mount(self) -> None:
        entries = list(telemetry.load_history(limit=5))
        if not entries:
            self.update("No telemetry recorded.")
        else:
            rendered = "\n".join(str(entry) for entry in entries)
            self.update(rendered)

FILE: blux_commander/ui/panels/terminal_panel.py
Kind: text
Size: 406
Last modified: 2026-01-20T07:01:56.524135+00:00

CONTENT:
"""Terminal panel widget."""

from __future__ import annotations

from textual.widgets import Static


class TerminalPanel(Static):
    """Placeholder for the integrated terminal."""

    DEFAULT_CSS = """
    TerminalPanel {
        background: $surface-darken-2;
        padding: 1;
    }
    """

    def on_mount(self) -> None:
        self.update("Terminal ready. Use the shell command to interact.")

FILE: blux_commander/ui/themes/default.tcss
Kind: text
Size: 224
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
#cockpit {
    layout: grid;
    grid-size: 1 2;
    grid-columns: 30% 70%;
}

#right {
    layout: vertical;
    height: 100%;
}

#reflection {
    dock: bottom;
    padding: 1;
    background: $accent;
    color: $text;
}

FILE: blux_commander/ui/themes/highcontrast.tcss
Kind: text
Size: 113
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
* {
    color: #ffffff;
    background: #000000;
}

#reflection {
    background: #ff00ff;
    color: #000000;
}

FILE: blux_commander/web/auth.py
Kind: text
Size: 1014
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Read-only authentication stubs for the BLUX Commander dashboard."""

from __future__ import annotations

from dataclasses import dataclass
from typing import Optional

@dataclass
class KeyPair:
    """Simple representation of a local authentication keypair."""

    public_key: str
    private_key: str


class AuthManager:
    """Provide read-only authentication placeholders without tokens."""

    def __init__(self) -> None:
        self._keypair: Optional[KeyPair] = None

    # ------------------------------------------------------------------
    def ensure_keypair(self) -> KeyPair:
        if self._keypair is None:
            self._keypair = KeyPair(public_key="read-only", private_key="")
        return self._keypair

    def require(self, token: Optional[str]) -> KeyPair:
        _ = token
        return self.ensure_keypair()


def authenticate_header(token: Optional[str], manager: AuthManager) -> KeyPair:
    """FastAPI dependency for read-only access."""

    return manager.require(token)

FILE: blux_commander/web/commands.py
Kind: text
Size: 2531
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Read-only command stubs for the dashboard."""

from __future__ import annotations

import time
from dataclasses import dataclass
from typing import AsyncIterator, List, Optional

from .storage import StorageManager, build_memory_entry


@dataclass
class CommandResult:
    """Structured outcome of a command request."""

    command: str
    repo: Optional[str]
    exit_code: int
    output: List[str]
    error: List[str]
    duration_seconds: float

    def as_dict(self) -> dict:
        return {
            "command": self.command,
            "repo": self.repo,
            "exit_code": self.exit_code,
            "output": self.output,
            "error": self.error,
            "duration_seconds": self.duration_seconds,
        }


class CommandExecutor:
    """Reject command execution in read-only mode."""

    def __init__(self, storage: StorageManager) -> None:
        self.storage = storage
        self.cli_path: Optional[str] = None

    # ------------------------------------------------------------------
    def execute(self, command: str, repo: Optional[str] = None) -> CommandResult:
        start = time.perf_counter()
        message = "Command execution is disabled in the read-only observability cockpit."
        result = CommandResult(
            command=command,
            repo=repo,
            exit_code=501,
            output=[],
            error=[message],
            duration_seconds=time.perf_counter() - start,
        )
        self._record(result)
        return result

    async def stream(self, command: str, repo: Optional[str] = None) -> AsyncIterator[dict]:
        message = "Command execution is disabled in the read-only observability cockpit."
        result = CommandResult(
            command=command,
            repo=repo,
            exit_code=501,
            output=[],
            error=[message],
            duration_seconds=0.0,
        )
        self._record(result)
        yield {"type": "error", "message": message}
        yield {"type": "exit", "code": result.exit_code, "duration": result.duration_seconds}

    # ------------------------------------------------------------------
    def _record(self, result: CommandResult) -> None:
        entry = build_memory_entry(
            command=result.command,
            repo=result.repo,
            exit_code=result.exit_code,
            output=result.output,
            error=result.error,
            duration_seconds=result.duration_seconds,
        )
        self.storage.append_memory(entry)


FILE: blux_commander/web/insights.py
Kind: text
Size: 4015
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Repository insights and dashboard aggregation utilities."""

from __future__ import annotations

import os
from dataclasses import dataclass
from pathlib import Path
from typing import Dict, List, Optional

from .storage import StorageManager


@dataclass
class RepoRecord:
    name: str
    path: str
    description: Optional[str] = None

    def as_dict(self) -> Dict[str, Optional[str]]:
        return {"name": self.name, "path": self.path, "description": self.description}


@dataclass
class RepoInsight:
    name: str
    path: str
    branch: str
    dirty: bool
    latest_commit: Optional[str]
    ahead_commits: Optional[int]
    size_bytes: Optional[int]
    tracked_files: Optional[int]
    description: Optional[str] = None

    def as_dict(self) -> Dict[str, Optional[str]]:
        return {
            "name": self.name,
            "path": self.path,
            "branch": self.branch,
            "dirty": self.dirty,
            "latest_commit": self.latest_commit,
            "ahead_commits": self.ahead_commits,
            "size_bytes": self.size_bytes,
            "tracked_files": self.tracked_files,
            "description": self.description,
        }


class RepoIndex:
    """Persist and collect insights for tracked repositories."""

    def __init__(self, storage: StorageManager) -> None:
        self.storage = storage

    # ------------------------------------------------------------------
    def list_records(self) -> List[RepoRecord]:
        records = []
        for item in self.storage.load_repos():
            records.append(RepoRecord(**item))
        return records

    def upsert_record(self, record: RepoRecord) -> None:
        existing = {rec.name: rec for rec in self.list_records()}
        existing[record.name] = record
        self.storage.save_repos(rec.as_dict() for rec in existing.values())

    def remove_record(self, name: str) -> None:
        remaining = [rec for rec in self.list_records() if rec.name != name]
        self.storage.save_repos(rec.as_dict() for rec in remaining)

    # ------------------------------------------------------------------
    def collect_insights(self) -> List[RepoInsight]:
        insights: List[RepoInsight] = []
        for record in self.list_records():
            path = Path(record.path).expanduser()
            insights.append(_inspect_repo(record, path))
        return insights


def _inspect_repo(record: RepoRecord, path: Path) -> RepoInsight:
    if not path.exists():
        return RepoInsight(
            name=record.name,
            path=str(path),
            branch="missing",
            dirty=False,
            latest_commit=None,
            ahead_commits=None,
            size_bytes=None,
            tracked_files=None,
            description=record.description,
        )

    branch = "untracked"
    dirty = False
    latest_commit = None
    ahead = None
    size_bytes = _estimate_size(path)
    tracked_files = _count_files(path)
    return RepoInsight(
        name=record.name,
        path=str(path),
        branch=branch,
        dirty=dirty,
        latest_commit=latest_commit,
        ahead_commits=ahead,
        size_bytes=size_bytes,
        tracked_files=tracked_files,
        description=record.description,
    )


def _estimate_size(path: Path, *, file_limit: int = 5000) -> Optional[int]:
    if not path.exists():
        return None
    total = 0
    counted = 0
    for root, _, files in os.walk(path):
        for file in files:
            try:
                total += (Path(root) / file).stat().st_size
            except OSError:
                continue
            counted += 1
            if counted >= file_limit:
                return total
    return total


def _count_files(path: Path, *, file_limit: int = 5000) -> Optional[int]:
    if not path.exists():
        return None
    counted = 0
    for _, _, files in os.walk(path):
        counted += len(files)
        if counted >= file_limit:
            return counted
    return counted

FILE: blux_commander/web/server.py
Kind: text
Size: 4833
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""BLUX Commander web dashboard server."""

from __future__ import annotations

from pathlib import Path
from typing import Optional

from fastapi import Depends, FastAPI, Header, HTTPException, WebSocket, WebSocketDisconnect
from fastapi.responses import HTMLResponse
from fastapi.staticfiles import StaticFiles

from blux_commander.core import commander, plugins

from .auth import AuthManager, KeyPair
from .commands import CommandExecutor
from .insights import RepoIndex, RepoRecord
from .storage import StorageManager, default_storage_dir


BASE_DIR = default_storage_dir()
storage_manager = StorageManager(BASE_DIR)
auth_manager = AuthManager()
repo_index = RepoIndex(storage_manager)
command_executor = CommandExecutor(storage_manager)

app = FastAPI(title="BLUX Commander Web Dashboard", version="0.2.0")
app.mount("/static", StaticFiles(directory=Path(__file__).parent / "static"), name="static")

INDEX_FILE = Path(__file__).parent / "templates" / "index.html"


# ---------------------------------------------------------------------------
# Helpers
# ---------------------------------------------------------------------------

def get_token_header(x_blux_key: Optional[str] = Header(default=None)) -> Optional[str]:
    return x_blux_key


def require_auth(token: Optional[str] = Depends(get_token_header)) -> KeyPair:
    return auth_manager.require(token)


# ---------------------------------------------------------------------------
# Routes
# ---------------------------------------------------------------------------


@app.get("/", response_class=HTMLResponse)
async def index() -> HTMLResponse:
    if not INDEX_FILE.exists():
        raise HTTPException(status_code=500, detail="Dashboard template missing")
    return HTMLResponse(INDEX_FILE.read_text(encoding="utf-8"))


@app.get("/api/status")
async def status() -> dict:
    keypair = auth_manager.ensure_keypair()
    return {
        "app": "blux-commander",
        "version": app.version,
        "cli_available": False,
        "config_dir": str(BASE_DIR),
        "public_key": keypair.public_key,
        "subsystems": commander.state.subsystems,
    }


@app.get("/api/auth/keypair")
async def auth_keypair() -> dict:
    keypair = auth_manager.ensure_keypair()
    return {"public_key": keypair.public_key, "mode": "read-only"}


@app.post("/api/auth/session")
async def auth_session(payload: dict) -> dict:
    _ = payload.get("token")
    return {"status": "ok", "mode": "read-only"}


@app.get("/api/commands/memory")
async def command_memory(_: KeyPair = Depends(require_auth)) -> dict:
    return {"entries": storage_manager.list_memory(limit=100)}


@app.post("/api/commands/execute")
async def command_execute(payload: dict, _: KeyPair = Depends(require_auth)) -> dict:
    command = payload.get("command")
    repo = payload.get("repo")
    if not command:
        raise HTTPException(status_code=400, detail="Command is required")
    result = command_executor.execute(command, repo)
    return {"result": result.as_dict()}


@app.websocket("/ws/commands")
async def commands_socket(websocket: WebSocket) -> None:
    _ = websocket.query_params.get("token")
    await websocket.accept()
    try:
        while True:
            message = await websocket.receive_json()
            command = message.get("command")
            repo = message.get("repo")
            if not command:
                await websocket.send_json({"type": "error", "message": "Command is required"})
                continue
            async for chunk in command_executor.stream(command, repo):
                await websocket.send_json(chunk)
    except WebSocketDisconnect:
        return


@app.get("/api/repos")
async def list_repos(_: KeyPair = Depends(require_auth)) -> dict:
    insights = [insight.as_dict() for insight in repo_index.collect_insights()]
    return {"repos": insights}


@app.post("/api/repos")
async def add_repo(payload: dict, _: KeyPair = Depends(require_auth)) -> dict:
    name = payload.get("name")
    path = payload.get("path")
    description = payload.get("description")
    if not name or not path:
        raise HTTPException(status_code=400, detail="name and path are required")
    repo_index.upsert_record(RepoRecord(name=name, path=path, description=description))
    return {"status": "ok"}


@app.delete("/api/repos/{name}")
async def delete_repo(name: str, _: KeyPair = Depends(require_auth)) -> dict:
    repo_index.remove_record(name)
    return {"status": "ok"}


@app.get("/api/plugins")
async def list_plugins(_: KeyPair = Depends(require_auth)) -> dict:
    discovered = plugins.list_registered(verbose=False)
    return {"plugins": discovered}


@app.get("/api/memory/replay")
async def memory_replay(_: KeyPair = Depends(require_auth)) -> dict:
    return {"entries": storage_manager.list_memory(limit=200)}

FILE: blux_commander/web/static/app.js
Kind: text
Size: 22381
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
import React, { useCallback, useEffect, useRef, useState } from "https://esm.sh/react@18.3.1";
import { createRoot } from "https://esm.sh/react-dom@18.3.1/client";

const h = React.createElement;
const API_BASE = `${window.location.origin}/api`;

function useLocalStorage(key, initialValue) {
  const [value, setValue] = useState(() => {
    try {
      const stored = window.localStorage.getItem(key);
      return stored ?? initialValue;
    } catch (error) {
      console.warn("Unable to access localStorage", error);
      return initialValue;
    }
  });

  const setItem = useCallback(
    (next) => {
      setValue((prev) => {
        const resolved = typeof next === "function" ? next(prev) : next;
        try {
          if (resolved === null || resolved === undefined) {
            window.localStorage.removeItem(key);
          } else {
            window.localStorage.setItem(key, resolved);
          }
        } catch (error) {
          console.warn("Failed to persist localStorage value", error);
        }
        return resolved;
      });
    },
    [key],
  );

  return [value, setItem];
}

function SectionCard({ title, description, actions, children }) {
  return h(
    "section",
    { className: "rounded-xl border border-slate-800 bg-slate-900/60 p-6 shadow-lg shadow-slate-950/40" },
    h(
      "div",
      { className: "mb-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between" },
      h("div", {}, h("h2", { className: "text-xl font-semibold" }, title), description && h("p", { className: "text-sm text-slate-400" }, description)),
      actions && h("div", { className: "flex items-center gap-2" }, actions),
    ),
    children,
  );
}

function Button({ children, onClick, type = "button", variant = "default", disabled }) {
  const styles =
    variant === "secondary"
      ? "border border-slate-700 bg-slate-800 hover:bg-slate-700"
      : variant === "ghost"
        ? "hover:bg-slate-800"
        : "bg-primary-500 hover:bg-primary-400 text-slate-950";
  return h(
    "button",
    {
      type,
      onClick,
      disabled,
      className: `inline-flex items-center justify-center rounded-lg px-4 py-2 text-sm font-medium transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary-400 disabled:cursor-not-allowed disabled:opacity-60 ${styles}`,
    },
    children,
  );
}

function useAuthenticatedFetch(token) {
  return useCallback(
    async (path, options = {}) => {
      const headers = new Headers(options.headers || {});
      if (token) {
        headers.set("X-BLUX-Key", token);
      }
      const response = await fetch(`${API_BASE}${path}`, { ...options, headers });
      if (!response.ok) {
        const errorBody = await response.json().catch(() => ({}));
        throw new Error(errorBody.detail || `Request failed with status ${response.status}`);
      }
      return response.json();
    },
    [token],
  );
}

function useBootstrap() {
  const [bootstrap, setBootstrap] = useState({ loading: true, data: null, error: null });
  useEffect(() => {
    let active = true;
    fetch(`${API_BASE}/auth/keypair`)
      .then((resp) => resp.json())
      .then((data) => {
        if (active) setBootstrap({ loading: false, data, error: null });
      })
      .catch((error) => {
        console.error("Failed to load keypair", error);
        if (active) setBootstrap({ loading: false, data: null, error });
      });
    return () => {
      active = false;
    };
  }, []);
  return bootstrap;
}

function CommandConsole({ token, onExecuted }) {
  const [command, setCommand] = useState("plugins list");
  const [repo, setRepo] = useState("");
  const [result, setResult] = useState(null);
  const [streamMessages, setStreamMessages] = useState([]);
  const [streaming, setStreaming] = useState(false);
  const wsRef = useRef(null);
  const fetcher = useAuthenticatedFetch(token);

  const connectSocket = useCallback(() => {
    if (!token) return;
    const wsUrl = new URL(`${window.location.origin.replace(/^http/, "ws")}/ws/commands`);
    wsUrl.searchParams.set("token", token);
    const socket = new WebSocket(wsUrl);
    socket.onopen = () => {
      setStreamMessages((messages) => [...messages, { type: "system", message: "Connected to command stream" }]);
    };
    socket.onmessage = (event) => {
      try {
        const payload = JSON.parse(event.data);
        setStreamMessages((messages) => [...messages, payload]);
        if (payload.type === "exit") {
          setStreaming(false);
        }
      } catch (error) {
        console.warn("Unable to parse websocket payload", error);
      }
    };
    socket.onclose = () => {
      setStreamMessages((messages) => [...messages, { type: "system", message: "Stream disconnected" }]);
    };
    socket.onerror = () => {
      setStreamMessages((messages) => [...messages, { type: "error", message: "Stream error" }]);
    };
    wsRef.current = socket;
  }, [token]);

  useEffect(() => {
    connectSocket();
    return () => {
      if (wsRef.current) {
        wsRef.current.close();
      }
    };
  }, [connectSocket]);

  const runCommand = useCallback(
    async (event) => {
      event.preventDefault();
      if (!command) return;
      try {
        const body = { command, repo: repo || null };
        const response = await fetcher("/commands/execute", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(body),
        });
        setResult(response.result);
        onExecuted?.();
      } catch (error) {
        setResult({ error: [error.message], output: [], exit_code: 1, command });
      }
    },
    [command, repo, fetcher, onExecuted],
  );

  const runStreaming = useCallback(() => {
    if (!command || !wsRef.current || wsRef.current.readyState !== WebSocket.OPEN) {
      setStreamMessages((messages) => [...messages, { type: "error", message: "Command stream unavailable" }]);
      return;
    }
    setStreaming(true);
    setStreamMessages((messages) => [
      ...messages,
      { type: "system", message: `→ ${command}${repo ? ` @ ${repo}` : ""}` },
    ]);
    wsRef.current.send(JSON.stringify({ command, repo: repo || null }));
  }, [command, repo]);

  return SectionCard(
    {
      title: "Command Center",
      description: "Execute bq-cli commands and inspect plugin output in real-time.",
      actions: h(
        Button,
        { variant: "secondary", onClick: runStreaming, disabled: !token || streaming },
        streaming ? "Streaming..." : "Run Stream",
      ),
    },
    h(
      "form",
      { onSubmit: runCommand, className: "flex flex-col gap-4" },
      h(
        "div",
        { className: "grid gap-4 md:grid-cols-[1fr_minmax(0,200px)_auto]" },
        h("input", {
          className: "w-full rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
          placeholder: "Command (e.g., plugins list)",
          value: command,
          onChange: (event) => setCommand(event.target.value),
        }),
        h("input", {
          className: "rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
          placeholder: "Repository path (optional)",
          value: repo,
          onChange: (event) => setRepo(event.target.value),
        }),
        h(Button, { type: "submit", disabled: !token }, "Run once"),
      ),
      result &&
        h(
          "div",
          { className: "grid gap-4 md:grid-cols-2" },
          h(ResultBlock, { title: "stdout", lines: result.output || [] }),
          h(ResultBlock, { title: "stderr", lines: result.error || [] }),
        ),
      h(StreamLog, { messages: streamMessages }),
    ),
  );
}

function ResultBlock({ title, lines }) {
  if (!lines.length) {
    return h(
      "div",
      { className: "rounded-lg border border-slate-800 bg-slate-950/80 p-3" },
      h("p", { className: "text-xs uppercase tracking-wide text-slate-500" }, title),
      h("p", { className: "mt-2 text-sm text-slate-500" }, "No output"),
    );
  }
  return h(
    "div",
    { className: "rounded-lg border border-slate-800 bg-slate-950/80 p-3" },
    h("p", { className: "text-xs uppercase tracking-wide text-slate-500" }, title),
    h(
      "pre",
      { className: "mt-2 overflow-x-auto whitespace-pre-wrap break-words text-sm leading-relaxed" },
      lines.join("\n"),
    ),
  );
}

function StreamLog({ messages }) {
  if (!messages.length) return null;
  return h(
    "div",
    { className: "rounded-lg border border-slate-800 bg-slate-950/80 p-3" },
    h("p", { className: "text-xs uppercase tracking-wide text-slate-500" }, "Live Stream"),
    h(
      "div",
      { className: "mt-3 max-h-60 space-y-2 overflow-y-auto text-sm" },
      messages.map((message, index) =>
        h(
          "div",
          { key: index, className: message.type === "error" ? "text-red-400" : "text-slate-200" },
          h("span", { className: "mr-2 text-xs uppercase text-slate-500" }, message.type || "log"),
          message.message || JSON.stringify(message),
        ),
      ),
    ),
  );
}

function RepoInsights({ token, onRefresh, data, refreshSignal = 0 }) {
  const fetcher = useAuthenticatedFetch(token);
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState(null);

  const refresh = useCallback(async () => {
    if (!token) return;
    setLoading(true);
    setError(null);
    try {
      const response = await fetcher("/repos");
      onRefresh(response.repos);
    } catch (err) {
      setError(err);
    } finally {
      setLoading(false);
    }
  }, [token, fetcher, onRefresh]);

  useEffect(() => {
    refresh();
  }, [refresh, refreshSignal]);

  return SectionCard(
    {
      title: "Repository Insights",
      description: "Track multiple BLUX project workspaces and git health.",
      actions: h(Button, { variant: "secondary", onClick: refresh, disabled: loading || !token }, loading ? "Refreshing" : "Refresh"),
    },
    h(
      "div",
      { className: "grid gap-4" },
      error && h("p", { className: "text-sm text-red-400" }, error.message),
      (data || []).length === 0 && !loading
        ? h(
            "div",
            { className: "rounded-lg border border-dashed border-slate-800 p-4 text-sm text-slate-400" },
            "No repositories registered yet. Use the form below to add one.",
          )
        : (data || []).map((repo) => h(RepoCard, { key: repo.name, repo })),
    ),
  );
}

function RepoCard({ repo }) {
  return h(
    "article",
    { className: "rounded-lg border border-slate-800 bg-slate-950/80 p-4" },
    h("div", { className: "flex items-start justify-between" }, h("h3", { className: "text-lg font-semibold" }, repo.name), h("span", { className: "rounded-full bg-primary-500/10 px-3 py-1 text-xs font-medium text-primary-300" }, repo.branch || "unknown")),
    repo.description && h("p", { className: "mt-2 text-sm text-slate-400" }, repo.description),
    h(
      "dl",
      { className: "mt-4 grid grid-cols-2 gap-4 text-sm" },
      h(StatCell, { label: "Dirty", value: repo.dirty ? "Yes" : "No" }),
      h(StatCell, { label: "Ahead", value: repo.ahead_commits ?? "–" }),
      h(StatCell, { label: "Tracked files", value: repo.tracked_files ?? "–" }),
      h(StatCell, { label: "Size", value: repo.size_bytes ? formatBytes(repo.size_bytes) : "–" }),
      h(StatCell, { label: "Latest", value: repo.latest_commit ?? "–", wide: true }),
      h(StatCell, { label: "Path", value: repo.path, wide: true }),
    ),
  );
}

function StatCell({ label, value, wide }) {
  return h(
    "div",
    { className: `rounded-md border border-slate-800 bg-slate-950/60 p-3 ${wide ? "col-span-2" : ""}` },
    h("dt", { className: "text-xs uppercase tracking-wide text-slate-500" }, label),
    h("dd", { className: "mt-1 text-sm text-slate-200" }, value),
  );
}

function formatBytes(bytes) {
  if (!bytes) return "0 B";
  const units = ["B", "KB", "MB", "GB", "TB"];
  let index = 0;
  let value = bytes;
  while (value >= 1024 && index < units.length - 1) {
    value /= 1024;
    index += 1;
  }
  return `${value.toFixed(1)} ${units[index]}`;
}

function PluginRegistry({ token }) {
  const [plugins, setPlugins] = useState([]);
  const [error, setError] = useState(null);
  const fetcher = useAuthenticatedFetch(token);

  const refresh = useCallback(async () => {
    if (!token) return;
    setError(null);
    try {
      const response = await fetcher("/plugins");
      setPlugins(response.plugins || []);
    } catch (err) {
      setError(err);
    }
  }, [token, fetcher]);

  useEffect(() => {
    refresh();
  }, [refresh]);

  return SectionCard(
    {
      title: "Plugin Registry",
      description: "Discover installed BLUX extensions registered via entry points.",
      actions: h(Button, { variant: "secondary", onClick: refresh, disabled: !token }, "Refresh"),
    },
    error && h("p", { className: "text-sm text-red-400" }, error.message),
    h(
      "ul",
      { className: "mt-4 space-y-2 text-sm" },
      plugins.length === 0
        ? h("li", { className: "text-slate-400" }, "No plugins detected. Register entry points via 'blux.plugins'.")
        : plugins.map((plugin) => h("li", { key: plugin, className: "rounded-md border border-slate-800 bg-slate-950/60 px-3 py-2" }, plugin)),
    ),
  );
}

function MemoryReplay({ entries }) {
  return SectionCard(
    {
      title: "Memory Replay",
      description: "Chronological view of recent command executions stored locally.",
    },
    entries.length === 0
      ? h("p", { className: "text-sm text-slate-400" }, "No command memory recorded yet. Execute commands to populate history." )
      : h(
          "div",
          { className: "space-y-4" },
          entries.map((entry, index) =>
            h(
              "article",
              { key: index, className: "rounded-lg border border-slate-800 bg-slate-950/70 p-4" },
              h("header", { className: "flex flex-wrap items-center justify-between gap-2" },
                h("span", { className: "rounded-md bg-primary-500/10 px-2 py-1 text-xs font-medium text-primary-300" }, entry.command),
                h("time", { className: "text-xs text-slate-500" }, entry.timestamp),
              ),
              entry.repo && h("p", { className: "mt-2 text-xs text-slate-400" }, `Repo: ${entry.repo}`),
              h(
                "div",
                { className: "mt-3 grid gap-3 md:grid-cols-2" },
                h(ResultBlock, { title: "stdout", lines: entry.output || [] }),
                h(ResultBlock, { title: "stderr", lines: entry.error || [] }),
              ),
              h(
                "p",
                { className: "mt-2 text-xs text-slate-500" },
                `Exit ${entry.exit_code} · ${typeof entry.duration_seconds === "number" ? entry.duration_seconds.toFixed(2) : "0.00"}s`,
              ),
            ),
          ),
        ),
  );
}

function RepoForm({ token, onAdded }) {
  const [name, setName] = useState("");
  const [path, setPath] = useState("");
  const [description, setDescription] = useState("");
  const [error, setError] = useState(null);
  const fetcher = useAuthenticatedFetch(token);

  const submit = useCallback(
    async (event) => {
      event.preventDefault();
      if (!name || !path) {
        setError(new Error("Name and path are required"));
        return;
      }
      setError(null);
      try {
        await fetcher("/repos", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ name, path, description: description || null }),
        });
        setName("");
        setPath("");
        setDescription("");
        onAdded?.();
      } catch (err) {
        setError(err);
      }
    },
    [name, path, description, fetcher, onAdded],
  );

  return SectionCard(
    {
      title: "Add Repository",
      description: "Register a local BLUX project to include it in insights.",
    },
    h(
      "form",
      { className: "grid gap-4 md:grid-cols-3", onSubmit: submit },
      h("input", {
        className: "rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
        placeholder: "Display name",
        value: name,
        onChange: (event) => setName(event.target.value),
      }),
      h("input", {
        className: "rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
        placeholder: "Path to repo",
        value: path,
        onChange: (event) => setPath(event.target.value),
      }),
      h(Button, { type: "submit", disabled: !token }, "Add"),
      h("textarea", {
        className: "col-span-3 min-h-[80px] rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
        placeholder: "Optional description", value: description,
        onChange: (event) => setDescription(event.target.value),
      }),
      error && h("p", { className: "col-span-3 text-sm text-red-400" }, error.message),
    ),
  );
}

function AuthenticationPanel({ bootstrap, token, setToken }) {
  const [input, setInput] = useState(token || "");
  const [status, setStatus] = useState(null);

  const submit = useCallback(
    async (event) => {
      event.preventDefault();
      if (!input) return;
      try {
        const response = await fetch(`${API_BASE}/auth/session`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ token: input }),
        });
        if (!response.ok) {
          const errorBody = await response.json().catch(() => ({}));
          throw new Error(errorBody.detail || "Authentication failed");
        }
        setToken(input);
        setStatus("Authenticated");
      } catch (error) {
        setStatus(error.message);
      }
    },
    [input, setToken],
  );

  return SectionCard(
    {
      title: "Local Keypair Authentication",
      description: "Paste the private key stored under ~/.config/blux-commander/keypair.json to unlock the dashboard.",
      actions: bootstrap.data &&
        h(
          "a",
          {
            className: "text-xs font-medium text-primary-300 hover:text-primary-200",
            href: "#",
            onClick: (event) => {
              event.preventDefault();
              navigator.clipboard?.writeText(bootstrap.data.public_key || "");
              setStatus("Public key copied");
            },
          },
          "Copy public key",
        ),
    },
    h(
      "form",
      { className: "flex flex-col gap-4", onSubmit: submit },
      h("p", { className: "text-sm text-slate-300" }, "Your private key never leaves this device. Keys are generated automatically when the server starts."),
      bootstrap.loading
        ? h("p", { className: "text-sm text-slate-400" }, "Generating keypair…")
        : bootstrap.error
          ? h("p", { className: "text-sm text-red-400" }, "Failed to bootstrap keypair. Check server logs.")
          : h(
              "div",
              { className: "grid gap-3 md:grid-cols-[1fr_auto]" },
              h("input", {
                className: "w-full rounded-lg border border-slate-700 bg-slate-950/80 px-3 py-2 text-sm",
                placeholder: "Private key",
                value: input,
                onChange: (event) => setInput(event.target.value.trim()),
              }),
              h(Button, { type: "submit" }, "Unlock"),
              h(
                "p",
                { className: "md:col-span-2 text-xs text-slate-500" },
                `Keys stored at ${bootstrap.data?.config_dir ?? '~/.config/blux-commander'}`,
              ),
            ),
      status && h("p", { className: "text-xs text-slate-400" }, status),
    ),
  );
}

function Dashboard() {
  const bootstrap = useBootstrap();
  const [token, setToken] = useLocalStorage("blux-commander-key", "");
  const [repos, setRepos] = useState([]);
  const [memory, setMemory] = useState([]);
  const [repoSignal, setRepoSignal] = useState(0);

  const fetcher = useAuthenticatedFetch(token);

  const refreshMemory = useCallback(async () => {
    if (!token) return;
    try {
      const response = await fetcher("/memory/replay");
      setMemory(response.entries || []);
    } catch (error) {
      console.warn("Failed to refresh memory", error);
    }
  }, [token, fetcher]);

  useEffect(() => {
    refreshMemory();
  }, [refreshMemory]);

  const statusBanner = bootstrap.data
    ? h(
        "div",
        { className: "rounded-xl border border-primary-500/20 bg-primary-500/10 px-6 py-4" },
        h("p", { className: "text-sm text-primary-100" }, "BLUX Commander is ready. Authenticate to access orchestration tools."),
      )
    : null;

  return h(
    "main",
    { className: "mx-auto flex min-h-screen w-full max-w-6xl flex-col gap-8 px-6 py-10" },
    h(
      "header",
      { className: "flex flex-col gap-4 md:flex-row md:items-center md:justify-between" },
      h("div", {}, h("h1", { className: "text-3xl font-bold" }, "BLUX Commander"), h("p", { className: "text-sm text-slate-400" }, "Unified cockpit for orchestrating BLUX projects.")),
      bootstrap.data && h("span", { className: "rounded-full bg-slate-800 px-4 py-2 text-xs text-slate-300" }, `Public key: ${bootstrap.data.public_key.slice(0, 8)}…`),
    ),
    statusBanner,
    h(AuthenticationPanel, { bootstrap, token, setToken }),
    token
      ? h(
          React.Fragment,
          {},
          h(CommandConsole, { token, onExecuted: refreshMemory }),
          h(RepoForm, {
            token,
            onAdded: () => {
              setRepoSignal((value) => value + 1);
              setTimeout(() => {
                refreshMemory();
              }, 100);
            },
          }),
          h(RepoInsights, { token, data: repos, onRefresh: setRepos, refreshSignal: repoSignal }),
          h(PluginRegistry, { token }),
          h(MemoryReplay, { entries: memory }),
        )
      : h(
          "p",
          { className: "text-sm text-slate-400" },
          "Authenticate with your private key to load project insights, command history, and live orchestration tools.",
        ),
  );
}

const container = document.getElementById("root");
if (container) {
  const root = createRoot(container);
  root.render(h(Dashboard));
}

FILE: blux_commander/web/static/assets/style.css
Kind: text
Size: 3322
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
:root {
  color-scheme: dark;
  font-family: "Inter", "Segoe UI", system-ui, sans-serif;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  padding: 2rem;
  background: #0f1115;
  color: #f5f5f5;
}

a {
  color: #6dd3ff;
}

main.app {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 1.5rem;
}

.hero {
  display: grid;
  grid-template-columns: minmax(0, 2fr) minmax(0, 1fr);
  gap: 2rem;
  align-items: start;
}

.eyebrow {
  text-transform: uppercase;
  letter-spacing: 0.2em;
  color: #6dd3ff;
  font-size: 0.75rem;
  margin: 0 0 0.5rem;
}

h1 {
  margin: 0 0 0.75rem;
  font-size: 2.5rem;
}

.subtitle {
  margin: 0;
  color: #cbd2e5;
  line-height: 1.5;
}

.status {
  background: rgba(255, 255, 255, 0.05);
  padding: 1rem;
  border-radius: 0.75rem;
}

.status ul {
  list-style: none;
  padding: 0;
  margin: 0.75rem 0 0;
  display: grid;
  gap: 0.35rem;
}

section.panel {
  background: rgba(255, 255, 255, 0.05);
  padding: 1.5rem;
  border-radius: 0.75rem;
}

section.panel h2 {
  margin-top: 0;
}

.controls p {
  margin: 0.5rem 0 0;
  color: #cbd2e5;
}

.control-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 1.5rem;
  margin-top: 1rem;
}

.file-input {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  border: 1px dashed #6dd3ff;
  padding: 1rem;
  border-radius: 0.75rem;
  text-align: center;
  cursor: pointer;
}

.file-input input {
  display: none;
}

.file-input span {
  font-weight: 600;
}

.filter label {
  display: block;
  font-weight: 600;
  margin-bottom: 0.35rem;
}

.filter input {
  width: 100%;
  padding: 0.6rem 0.75rem;
  border-radius: 0.5rem;
  border: 1px solid #2a2f3a;
  background: #141821;
  color: #f5f5f5;
}

.filter small {
  display: block;
  margin-top: 0.5rem;
  color: #9da7bc;
}

.actions {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

button {
  border: none;
  border-radius: 0.5rem;
  padding: 0.65rem 1rem;
  font-weight: 600;
  background: #6dd3ff;
  color: #0f1115;
  cursor: pointer;
}

button:disabled {
  background: #2a2f3a;
  color: #9da7bc;
  cursor: not-allowed;
}

.hint {
  margin: 0;
  color: #9da7bc;
  font-size: 0.85rem;
}

.load-status {
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  border-radius: 0.5rem;
  background: #141821;
  color: #cbd2e5;
}

.summary-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.summary-card {
  background: #141821;
  padding: 1rem;
  border-radius: 0.75rem;
}

.summary-card p {
  font-size: 1.75rem;
  margin: 0.5rem 0 0;
}

.empty-state {
  padding: 1rem;
  border-radius: 0.75rem;
  background: #141821;
  color: #9da7bc;
}

.card-list {
  display: grid;
  gap: 1rem;
}

.card {
  background: #141821;
  border-radius: 0.75rem;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.card-heading {
  display: flex;
  justify-content: space-between;
  gap: 1rem;
  align-items: baseline;
}

.card-heading h3 {
  margin: 0;
}

.card-heading span {
  color: #9da7bc;
  font-size: 0.85rem;
}

pre {
  margin: 0;
  white-space: pre-wrap;
  word-break: break-word;
  font-size: 0.85rem;
  color: #cbd2e5;
}

@media (max-width: 900px) {
  body {
    padding: 1.25rem;
  }

  .hero {
    grid-template-columns: 1fr;
  }
}

FILE: blux_commander/web/storage.py
Kind: text
Size: 3911
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
"""Local-first storage helpers for the BLUX Commander dashboard."""

from __future__ import annotations

import os
import re
from dataclasses import dataclass
from datetime import UTC, datetime
from pathlib import Path
from typing import Any, Dict, Iterable, List, Optional


_CONFIG_ENV_VAR = "BLUX_COMMANDER_HOME"
_DEFAULT_CONFIG_SUBDIR = Path(".config") / "blux-commander"


def default_storage_dir() -> Path:
    """Return the configured storage directory without creating it."""

    override = os.environ.get(_CONFIG_ENV_VAR)
    if override:
        path = Path(override).expanduser()
    else:
        path = Path.home() / _DEFAULT_CONFIG_SUBDIR
    return path


@dataclass
class CommandMemoryEntry:
    """In-memory representation of a recorded command execution."""

    command: str
    repo: Optional[str]
    exit_code: int
    output: List[str]
    error: List[str]
    timestamp: str
    duration_seconds: float

    def as_dict(self) -> Dict[str, Any]:
        return {
            "command": self.command,
            "repo": self.repo,
            "exit_code": self.exit_code,
            "output": self.output,
            "error": self.error,
            "timestamp": self.timestamp,
            "duration_seconds": self.duration_seconds,
        }


class StorageManager:
    """Persist command logs, memory, and auxiliary dashboard state."""

    def __init__(self, base_dir: Optional[Path] = None, *, memory_retention: int = 200) -> None:
        self.base_dir = base_dir or default_storage_dir()
        self.logs_dir = self.base_dir / "logs"
        self._memory_retention = memory_retention
        self._memory_entries: List[Dict[str, Any]] = []
        self._repos: List[Dict[str, Any]] = []

    # ------------------------------------------------------------------
    # Memory persistence
    # ------------------------------------------------------------------
    def append_memory(self, entry: CommandMemoryEntry) -> None:
        self._memory_entries.append(entry.as_dict())
        self._memory_entries = self._memory_entries[-self._memory_retention :]

    def list_memory(self, *, limit: Optional[int] = 50) -> List[Dict[str, Any]]:
        data = list(reversed(self._memory_entries))
        if limit is not None:
            data = data[:limit]
        return data

    # ------------------------------------------------------------------
    # Logging helpers
    # ------------------------------------------------------------------
    def write_log(self, entry: CommandMemoryEntry) -> Path:
        slug = self._slugify(entry.command)[:64] or "command"
        timestamp = datetime.fromisoformat(entry.timestamp).strftime("%Y%m%d-%H%M%S")
        log_path = self.logs_dir / f"{timestamp}-{slug}.log"
        return log_path

    @staticmethod
    def _slugify(value: str) -> str:
        slug = re.sub(r"[^a-zA-Z0-9-_]+", "-", value.strip().lower())
        return slug.strip("-")

    # ------------------------------------------------------------------
    # Repo registry persistence
    # ------------------------------------------------------------------
    def load_repos(self) -> List[Dict[str, Any]]:
        return list(self._repos)

    def save_repos(self, records: Iterable[Dict[str, Any]]) -> None:
        self._repos = list(records)


def build_memory_entry(
    *,
    command: str,
    repo: Optional[str],
    exit_code: int,
    output: Iterable[str],
    error: Iterable[str],
    duration_seconds: float,
    timestamp: Optional[datetime] = None,
) -> CommandMemoryEntry:
    """Convenience helper to create a :class:`CommandMemoryEntry`."""

    ts = (timestamp or datetime.now(UTC)).isoformat(timespec="seconds")
    return CommandMemoryEntry(
        command=command,
        repo=repo,
        exit_code=exit_code,
        output=list(output),
        error=list(error),
        timestamp=ts,
        duration_seconds=duration_seconds,
    )

FILE: blux_commander/web/templates/index.html
Kind: text
Size: 1492
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>BLUX Commander Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.tailwindcss.com?plugins=forms,typography,aspect-ratio"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            fontFamily: {
              display: ['Space Grotesk', 'sans-serif'],
            },
            colors: {
              primary: {
                50: '#ecfdf5',
                100: '#d1fae5',
                200: '#a7f3d0',
                300: '#6ee7b7',
                400: '#34d399',
                500: '#10b981',
                600: '#059669',
                700: '#047857',
                800: '#065f46',
                900: '#064e3b',
              },
              slate: tailwind.colors.slate,
            },
          },
        },
      };
    </script>
    <link rel="stylesheet" href="/static/assets/style.css" />
  </head>
  <body class="bg-slate-950 text-slate-100 font-display">
    <div id="root" class="min-h-screen"></div>
    <script type="module" src="/static/app.js"></script>
  </body>
</html>

FILE: docs/API.md
Kind: text
Size: 901
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# API Reference

## CLI Commands

| Command | Description |
|---------|-------------|
| `bluxq cmd dashboard` | Launch the Textual cockpit. |
| `bluxq cmd status` | Display current subsystem status information. |
| `bluxq cmd plugins list` | List registered Commander plugins. |
| `bluxq cmd telemetry tail` | Tail telemetry events in real-time. |

## HTTP Endpoints

The FastAPI service exposes the following read-only endpoints:

- `GET /api/status` – returns subsystem status snapshot.
- `GET /api/repos` – lists configured repository insights.
- `POST /api/commands/execute` – returns a read-only rejection payload (no execution).
- `GET /api/commands/memory` – lists recent command requests.
- `GET /api/memory/replay` – replays stored command request metadata.
- `GET /api/plugins` – lists registered plugin metadata.

Refer to module docstrings for additional handler descriptions.

FILE: docs/ARCHITECTURE.md
Kind: text
Size: 1332
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# Architecture

BLUX Commander is organized into modular layers that coordinate read-only observability,
presentation, and data feeds.

## Core Layer

- **Commander Hub (`blux_commander/core/commander.py`)** – Maintains runtime context for
  observability artifacts.
- **Shell (`blux_commander/core/shell.py`)** – Disabled placeholder that rejects execution.
- **TUI (`blux_commander/core/tui.py`)** – Exposes Textual-powered cockpit panes.
- **API (`blux_commander/core/api.py`)** – Hosts FastAPI services for read-only dashboards.
- **Telemetry (`blux_commander/core/telemetry.py`)** – Records metrics and audit trails.
- **Config (`blux_commander/core/config.py`)** – Loads configuration from env, user, and project.
- **Plugins (`blux_commander/core/plugins.py`)** – Discovers, validates, and activates plugins.

## Integration Layer

Subsystem adapters in `blux_commander/integrations/` expose read-only hooks that publish
observability artifacts into the core state.

## Presentation Layer

- **Textual UI** – Multi-pane layout containing logs, telemetry, and plugin views.
- **Web Dashboard** – Optional FastAPI + template powered read-only interface.

## Data Layer

Telemetry and audit logs are displayed for situational awareness. Data is presented as read-only
snapshots to avoid mutating system state.

FILE: docs/CONFIGURATION.md
Kind: text
Size: 602
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
# Configuration

Commander resolves configuration from multiple sources:

1. Environment variables (`BLUX_CMD_*`).
2. User configuration (`~/.config/blux-commander/config.yaml`).
3. Project configuration (`./config.yaml`).

Later entries override earlier ones while maintaining backward compatibility.

## Example Configuration

```yaml
default_workspace: ~/blux
telemetry:
  enabled: true
  store: sqlite
plugins:
  paths:
    - ./plugins
```

## Environment Flags

- `BLUX_CMD_TELEMETRY=off` – disable telemetry persistence.
- `BLUX_CMD_VERBOSE=true` – enable verbose logging in the CLI and TUI.

FILE: docs/INSTALL.md
Kind: text
Size: 622
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
# Installation

## Requirements

- Python 3.9+
- Supported operating systems: Linux, macOS, Windows (PowerShell), WSL2, and Android Termux
- Optional: virtual environment manager such as `venv`, `virtualenv`, or `conda`

## Steps

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\\Scripts\\activate
pip install -e .[dev]
```

The editable install registers the `bluxq` command-line entry point.

## Verification

- `bluxq cmd status` – prints current subsystem status summary.
- `bluxq cmd dashboard` – launches the Textual cockpit.
- `pytest` – executes automated tests and plugin fixtures.

FILE: docs/INTEGRATIONS.md
Kind: text
Size: 801
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# Integrations

Commander integrations are read-only data feeds that publish observability artifacts. They do not
execute commands, enforce policy, or mutate system state.

| Feed | Description |
|------|-------------|
| Envelope stream | Surface envelope payloads for operators to inspect. |
| Execution manifest feed | Display execution_manifest records and status changes. |
| Guard receipt feed | Visualize guard_receipt artifacts emitted by upstream systems. |
| Audit trail export | Render audits and compliance traces in the cockpit. |
| Trace pipeline | Show traces and timing data for observability. |

## Integration Lifecycle

1. Commander subscribes to read-only feeds on boot.
2. Feeds emit artifacts that are visualized in the cockpit.
3. No actions are triggered from within Commander.

FILE: docs/OPERATIONS.md
Kind: text
Size: 755
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# Operations

## Commander CLI

Use `bluxq cmd` to access read-only views:

- `dashboard` – start the Textual cockpit.
- `status` – review subsystem heartbeat information.
- `plugins list` – enumerate registered plugin modules.
- `telemetry tail` – stream recent telemetry entries.

## Runtime Modes

1. **Local Operator** – run the cockpit on a workstation for observation.
2. **Headless Observer** – run the FastAPI service for remote read-only insights.
3. **Hybrid** – use the TUI as a front-end while the API serves dashboards.

## Read-Only Guardrails

Commander does not launch shells, execute commands, or issue tokens. It only renders observability
artifacts such as envelope, guard_receipt, execution_manifest, audits, and traces.

FILE: docs/ROADMAP.md
Kind: text
Size: 682
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
# Roadmap

## v0.1 (Current)
- Project scaffolding and dependency management.
- Typer CLI entry point with core command stubs.
- Textual cockpit layout placeholders.
- FastAPI server skeleton and telemetry integration points.
- Initial documentation and CI pipelines.

## v0.2
- Implement full telemetry persistence and Prometheus metrics.
- Expand plugin framework with dynamic loading and lifecycle management.
- Integrate BLUX-Lite and BLUX-Guard workflows.

## v1.0
- Production-hardened sandboxing, policy enforcement, and self-aware reflection terminal.
- Enterprise SSO integration and advanced audit reporting.
- Release artifacts and documentation for managed deployments.

FILE: docs/ROLE.md
Kind: text
Size: 807
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# BLUX Commander Role

## Mission

BLUX Commander is a **read-only observability cockpit** for the BLUX ecosystem. It **is not a
control plane** and it performs **no execution**.

## Allowed artifacts (display-only)

BLUX Commander may only display and visualize the following artifacts:

- traces
- envelope
- guard_receipt
- execution_manifest
- audits
- status

## Explicit non-goals

BLUX Commander must never:

- execute commands, tools, or workflows
- issue, verify, or manage tokens of any kind
- enforce policy or implement a policy engine
- act as a runner, scheduler, or execution engine
- mutate system state or reach into host controls

## Boundary checks

Repository CI includes physics tests that block execution primitives, state mutation intent, and
role-bleed keywords in code directories.

FILE: docs/SECURITY.md
Kind: text
Size: 632
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# Security

BLUX Commander emphasizes safe-by-default observability.

## Principles

- **Least Privilege** – dashboards run without execution, enforcement, or token issuance.
- **Auditability** – telemetry trails surface audits and traces for review.
- **Isolation** – no shell execution or subprocess invocation is permitted.
- **Integrity** – plugins are metadata-only and do not mutate system state.

## Hardening Checklist

1. Restrict dashboard deployment to read-only networks or VPCs.
2. Enable TLS termination for the FastAPI server when exposed over networks.
3. Monitor observability feeds for anomalous activity.

FILE: docs/THEMES.md
Kind: text
Size: 429
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
# Themes

The Textual cockpit supports multiple theme presets stored under `blux_commander/ui/themes/`.

## Default Theme
- Balanced contrast for daily operations.
- Highlights actionable widgets and alerts.

## High Contrast Theme
- Optimized for accessibility and low-light environments.
- Enlarged fonts and high visibility color palette.

To apply a theme, set `BLUX_CMD_THEME=highcontrast` or adjust the configuration file.

FILE: docs/TROUBLESHOOTING.md
Kind: text
Size: 682
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
# Troubleshooting

## Common Issues

### TUI Does Not Start
- Ensure Textual >= 0.62 is installed.
- Check that the terminal supports rich color output.

### Plugins Missing
- Verify plugin directories in `config.yaml` and environment variables.
- Run `bluxq cmd plugins list --verbose` to display discovery paths.

### Telemetry Failures
- Confirm the telemetry directory is writable.
- Disable telemetry temporarily with `BLUX_CMD_TELEMETRY=off` and check logs.

## Collecting Diagnostics

Run `bluxq cmd status --verbose` to output detailed subsystem state, then attach the generated
JSONL telemetry snippet found in `~/.config/blux-commander/logs/` when filing support tickets.

FILE: docs/index.md
Kind: text
Size: 706
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
# BLUX Commander

BLUX Commander is a read-only observability cockpit for the BLUX ecosystem. It is **not a control
plane** and performs **no execution**. The UI focuses on visibility rather than actions or
orchestration.

## Capabilities

- **Read-Only Commander Core** – Summarize observability status and subsystem signals.
- **Multi-Pane Cockpit** – Operate a Textual dashboard featuring logs, telemetry, and artifact explorers.
- **Web Dashboard** – Browse read-only insights through FastAPI + React.
- **Artifact Visualization** – Inspect envelope, guard_receipt, execution_manifest, audits, and traces.

See the full documentation tree for deployment, operations, and customization details.

FILE: mkdocs.yml
Kind: text
Size: 775
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
site_name: BLUX Commander Docs
site_description: Enterprise developer cockpit for the BLUX ecosystem
repo_url: https://github.com/blux/blux-commander
nav:
  - Home: index.md
  - Architecture: ARCHITECTURE.md
  - Install: INSTALL.md
  - Operations: OPERATIONS.md
  - Security: SECURITY.md
  - Integrations: INTEGRATIONS.md
  - API: API.md
  - Configuration: CONFIGURATION.md
  - Telemetry & Troubleshooting:
      - Telemetry Themes: THEMES.md
      - Troubleshooting: TROUBLESHOOTING.md
  - Roadmap: ROADMAP.md
theme:
  name: material
  features:
    - navigation.sections
    - navigation.tracking
    - toc.integrate
plugins:
  - search
markdown_extensions:
  - admonition
  - toc:
      permalink: true
  - pymdownx.details
  - pymdownx.superfences
  - pymdownx.highlight

FILE: pyproject.toml
Kind: text
Size: 1423
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
[build-system]
requires = ["setuptools>=61.0"]
build-backend = "setuptools.build_meta"

[project]
name = "blux-commander"
version = "0.1.0"
description = "BLUX Commander — Developer & AI Orchestration Cockpit for the BLUX Ecosystem"
readme = "README.md"
requires-python = ">=3.9"
license = { text = "Apache-2.0" }
authors = [{ name = "BLUX", email = "ops@blux.systems" }]
keywords = ["cli", "tui", "ai", "developer-tools", "blux"]
classifiers = [
  "License :: OSI Approved :: Apache Software License",
  "Programming Language :: Python",
  "Programming Language :: Python :: 3",
  "Programming Language :: Python :: 3.9",
]

dependencies = [
  "typer>=0.12.3",
  "textual>=0.62.0",
  "rich>=13.7.0",
  "psutil>=5.9.8",
  "pyyaml>=6.0.1",
  "sqlite-utils>=3.36",
  "fastapi>=0.115.0",
  "uvicorn>=0.30.0",
  "prometheus-client>=0.20.0",
  "jinja2>=3.1.4",
]

[project.optional-dependencies]
dev = ["pytest", "mypy", "ruff", "mkdocs-material", "httpx>=0.27"]

[project.scripts]
bluxq = "blux_commander.cli:app"

[project.entry-points."blux.plugins"]
cmd = "blux_commander.cli:get_app"

[tool.pytest.ini_options]
minversion = "7.0"
addopts = "-ra"
testpaths = ["tests"]

[tool.ruff]
line-length = 100
target-version = "py39"

[tool.mypy]
python_version = "3.9"
strict = false
warn_return_any = true
warn_unused_configs = true

[tool.setuptools]
license-files = ["LICENSE", "LICENSE-APACHE", "LICENSE-COMMERCIAL", "NOTICE"]

FILE: scripts/build_docs.sh
Kind: text
Size: 61
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
#!/usr/bin/env bash
set -euo pipefail

mkdocs build --strict

FILE: scripts/gen_filetree.py
Kind: text
Size: 1154
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Generate a repository file tree."""

from __future__ import annotations

import argparse
from pathlib import Path

EXCLUDE = {".git", "__pycache__", ".mypy_cache", ".pytest_cache", "build", "dist"}


def build_tree(root: Path, prefix: str = "") -> list[str]:
    """Return formatted tree lines for the directory."""

    entries = sorted([entry for entry in root.iterdir() if entry.name not in EXCLUDE])
    lines: list[str] = []
    for index, entry in enumerate(entries):
        connector = "└── " if index == len(entries) - 1 else "├── "
        lines.append(f"{prefix}{connector}{entry.name}")
        if entry.is_dir():
            extension = "    " if index == len(entries) - 1 else "│   "
            lines.extend(build_tree(entry, prefix + extension))
    return lines


def main() -> None:
    parser = argparse.ArgumentParser(description="Generate repository file tree")
    parser.add_argument("root", nargs="?", default=".")
    args = parser.parse_args()
    root_path = Path(args.root).resolve()
    print(root_path.name)
    for line in build_tree(root_path):
        print(line)


if __name__ == "__main__":
    main()

FILE: scripts/physics_tests.sh
Kind: text
Size: 1856
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
#!/usr/bin/env bash
set -euo pipefail

ROOT_DIR=$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)
cd "$ROOT_DIR"

fail=0

report_error() {
  echo "ERROR: $1" >&2
  fail=1
}

code_dirs=()
for dir in blux_commander tests src app packages lib; do
  if [[ -d "$dir" ]]; then
    code_dirs+=("$dir")
  fi
done

exec_pattern='child_process|exec\(|spawn\(|subprocess|asyncio\\.create_subprocess|os\\.system|Runtime\\.getRuntime|ProcessBuilder|bash -c|sh -c|powershell|cmd\\.exe|sudo'
if [[ "${#code_dirs[@]}" -gt 0 ]]; then
  if rg -n -S "$exec_pattern" --glob '!.git/**' --glob '!scripts/physics_tests.sh' "${code_dirs[@]}"; then
    report_error "Found command-execution primitives in code directories."
  fi
fi

mutation_pattern='iptables|mount\\s|chroot|setcap|cap_net_admin|ptrace|/proc/|/sys/'
if [[ "${#code_dirs[@]}" -gt 0 ]]; then
  if rg -n -S "$mutation_pattern" --glob '!.git/**' --glob '!scripts/physics_tests.sh' "${code_dirs[@]}"; then
    report_error "Found state-mutation intent in code directories."
  fi
fi

role_pattern='receipt engine|enforcement|policy engine|capability token|issue token|verify token|execute tool|runner|sandbox profile'
if [[ "${#code_dirs[@]}" -gt 0 ]]; then
  if rg -n -S -i "$role_pattern" "${code_dirs[@]}"; then
    report_error "Found role-bleed keywords in code directories."
  fi
fi

responsibility_pattern='\\bguard\\b|\\breg\\b|\\blite\\b'
if [[ "${#code_dirs[@]}" -gt 0 ]]; then
  if rg -n -S -i "$responsibility_pattern" "${code_dirs[@]}"; then
    report_error "Found Guard/Reg/Lite responsibility signals in code directories."
  fi
  if rg -n --files -g '*guard*' -g '*reg*' -g '*lite*' "${code_dirs[@]}"; then
    report_error "Found Guard/Reg/Lite responsibility paths in code directories."
  fi
fi

if [[ "$fail" -ne 0 ]]; then
  echo "Physics tests failed." >&2
  exit 1
fi

echo "Physics tests passed."

FILE: scripts/run_tui_demo.py
Kind: text
Size: 238
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Run the BLUX Commander TUI demo."""

from __future__ import annotations

from blux_commander.core import commander, tui


def main() -> None:
    commander.bootstrap()
    tui.launch_dashboard()


if __name__ == "__main__":
    main()

FILE: scripts/update_readme_filetree.py
Kind: text
Size: 892
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Update the README file tree section."""

from __future__ import annotations

import re
from pathlib import Path

from gen_filetree import build_tree

README_PATH = Path(__file__).resolve().parents[1] / "README.md"
MARKER_START = "<!-- FILETREE:BEGIN -->"
MARKER_END = "<!-- FILETREE:END -->"


def main() -> None:
    tree_lines = ["```text"]
    tree_lines.extend(build_tree(Path(__file__).resolve().parents[1]))
    tree_lines.append("```")
    tree_block = "\n".join(tree_lines)
    content = README_PATH.read_text(encoding="utf-8")
    pattern = re.compile(
        rf"{MARKER_START}.*?{MARKER_END}", re.DOTALL,
    )
    replacement = f"{MARKER_START}\n<details><summary><strong>Repository File Tree</strong></summary>\n\n{tree_block}\n\n</details>\n{MARKER_END}"
    README_PATH.write_text(pattern.sub(replacement, content), encoding="utf-8")


if __name__ == "__main__":
    main()

FILE: tests/test_cli.py
Kind: text
Size: 301
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Tests for CLI wiring."""

from typer.testing import CliRunner

from blux_commander import cli

runner = CliRunner()


def test_status_command_runs() -> None:
    result = runner.invoke(cli.app, ["cmd", "status"])
    assert result.exit_code == 0
    assert "BLUX Commander Status" in result.stdout

FILE: tests/test_plugins.py
Kind: text
Size: 198
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Tests for plugin discovery."""

from blux_commander.core import plugins


def test_plugins_list_returns_list() -> None:
    result = plugins.list_registered()
    assert isinstance(result, list)

FILE: tests/test_shell.py
Kind: text
Size: 283
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Tests for shell utilities."""

from blux_commander.core import shell


def test_filtered_env_keys() -> None:
    env = shell._filtered_env()  # type: ignore[attr-defined]
    assert "PATH" in env
    assert all(key in {"PATH", "HOME", "SHELL", "BLUX_CMD_VERBOSE"} for key in env)

FILE: tests/test_tui.py
Kind: text
Size: 172
Last modified: 2026-01-20T07:01:56.528205+00:00

CONTENT:
"""Tests for TUI dashboard."""

from blux_commander.core import tui


def test_dashboard_class_title() -> None:
    assert tui.CommanderDashboard.TITLE == "BLUX Commander"

FILE: tests/test_web_dashboard.py
Kind: text
Size: 2583
Last modified: 2026-01-20T13:53:31.427815+00:00

CONTENT:
from __future__ import annotations

import sys
from pathlib import Path
from typing import Iterator

import pytest
from fastapi.testclient import TestClient


MODULES_TO_CLEAR = [
    "blux_commander.web.server",
    "blux_commander.web.auth",
    "blux_commander.web.commands",
    "blux_commander.web.storage",
    "blux_commander.web.insights",
]


@pytest.fixture()
def client(tmp_path: Path, monkeypatch: pytest.MonkeyPatch) -> Iterator[TestClient]:
    config_dir = tmp_path / ".config" / "blux-commander"
    monkeypatch.setenv("BLUX_COMMANDER_HOME", str(config_dir))
    import importlib
    for module in MODULES_TO_CLEAR:
        sys.modules.pop(module, None)
    server = importlib.import_module("blux_commander.web.server")
    with TestClient(server.app) as test_client:
        yield test_client


def test_bootstrap_creates_keypair(client: TestClient) -> None:
    response = client.get("/api/auth/keypair")
    assert response.status_code == 200
    data = response.json()
    assert "public_key" in data


def test_protected_endpoints_allow_readonly_access(client: TestClient) -> None:
    response = client.get("/api/repos")
    assert response.status_code == 200


def test_command_execution_records_memory(client: TestClient) -> None:
    execute_response = client.post(
        "/api/commands/execute",
        json={"command": "plugins list"},
    )
    assert execute_response.status_code == 200
    result = execute_response.json()["result"]
    assert "exit_code" in result
    assert result["command"] == "plugins list"
    assert result["exit_code"] == 501

    memory_response = client.get("/api/memory/replay")
    assert memory_response.status_code == 200
    entries = memory_response.json()["entries"]
    assert entries, "memory should include executed command"
    assert entries[0]["command"] == "plugins list"


def test_repo_insights_roundtrip(client: TestClient, tmp_path: Path) -> None:
    repo_dir = tmp_path / "example"
    repo_dir.mkdir()
    (repo_dir / "README.md").write_text("test", encoding="utf-8")

    add_response = client.post(
        "/api/repos",
        json={"name": "Example", "path": str(repo_dir)},
    )
    assert add_response.status_code == 200

    repos_response = client.get("/api/repos")
    assert repos_response.status_code == 200
    repos = repos_response.json()["repos"]
    assert any(repo["name"] == "Example" for repo in repos)


def test_plugins_endpoint(client: TestClient) -> None:
    response = client.get("/api/plugins")
    assert response.status_code == 200
    assert "plugins" in response.json()

## 4) Workflow Inventory (index only)
- .github/workflows/ci.yml: none
- .github/workflows/physics.yml: none

## 5) Search Index (raw results)
subprocess:
docs/SECURITY.md
scripts/physics_tests.sh

os.system:
none

exec(:
none

spawn:
scripts/physics_tests.sh

shell:
.git/hooks/push-to-checkout.sample
README.md
blux_commander/cli.py
blux_commander/core/shell.py
blux_commander/ui/panels/terminal_panel.py
docs/ARCHITECTURE.md
docs/OPERATIONS.md
docs/SECURITY.md
scripts/physics_tests.sh
tests/test_shell.py

child_process:
scripts/physics_tests.sh

policy:
docs/INTEGRATIONS.md
docs/ROADMAP.md
docs/ROLE.md
scripts/physics_tests.sh

ethic:
none

enforce:
README.md
docs/INTEGRATIONS.md
docs/ROADMAP.md
docs/ROLE.md
docs/SECURITY.md
scripts/physics_tests.sh

guard:
.git/hooks/pre-rebase.sample
README.md
blux_commander/core/commander.py
docs/INTEGRATIONS.md
docs/OPERATIONS.md
docs/ROLE.md
docs/index.md
scripts/physics_tests.sh

receipt:
README.md
blux_commander/core/commander.py
docs/INTEGRATIONS.md
docs/OPERATIONS.md
docs/ROLE.md
docs/index.md
scripts/physics_tests.sh

token:
.git/hooks/fsmonitor-watchman.sample
README.md
blux_commander/web/auth.py
blux_commander/web/server.py
blux_commander/web/static/app.js
docs/OPERATIONS.md
docs/ROLE.md
docs/SECURITY.md
scripts/physics_tests.sh

signature:
none

verify:
.git/hooks/pre-applypatch.sample
.git/hooks/pre-commit.sample
.git/hooks/pre-merge-commit.sample
.git/hooks/pre-push.sample
docs/ROLE.md
scripts/physics_tests.sh

capability:
scripts/physics_tests.sh

key_id:
none

contract:
LICENSE-APACHE

schema:
none

$schema:
none

json-schema:
none

router:
none

orchestr:
blux_commander/core/api.py
blux_commander/core/commander.py
blux_commander/web/static/app.js
docs/index.md

execute:
.git/hooks/push-to-checkout.sample
LICENSE-APACHE
blux_commander/core/api.py
blux_commander/web/commands.py
blux_commander/web/server.py
blux_commander/web/static/app.js
docs/API.md
docs/INSTALL.md
docs/INTEGRATIONS.md
docs/OPERATIONS.md
docs/ROLE.md
scripts/physics_tests.sh
tests/test_web_dashboard.py

command:
.git/FETCH_HEAD
.git/hooks/fsmonitor-watchman.sample
.git/hooks/pre-rebase.sample
.git/hooks/update.sample
README.md
blux_commander/__init__.py
blux_commander/cli.py
blux_commander/core/api.py
blux_commander/core/commander.py
blux_commander/core/config.py
blux_commander/core/shell.py
blux_commander/core/telemetry.py
blux_commander/core/tui.py
blux_commander/integrations/ca.py
blux_commander/integrations/doctrine.py
blux_commander/integrations/quantum.py
blux_commander/ui/panels/plugins_panel.py
blux_commander/ui/panels/telemetry_panel.py
blux_commander/ui/panels/terminal_panel.py
blux_commander/web/commands.py
blux_commander/web/server.py
blux_commander/web/static/app.js
blux_commander/web/storage.py
docs/API.md
docs/ARCHITECTURE.md
docs/CONFIGURATION.md
docs/INSTALL.md
docs/INTEGRATIONS.md
docs/OPERATIONS.md
docs/ROADMAP.md
docs/ROLE.md
docs/THEMES.md
docs/TROUBLESHOOTING.md
mkdocs.yml
pyproject.toml
scripts/physics_tests.sh
scripts/run_tui_demo.py
tests/test_cli.py
tests/test_plugins.py
tests/test_shell.py
tests/test_tui.py
tests/test_web_dashboard.py

## 6) Notes
none
